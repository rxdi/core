parcelRequire=function(e,r,n,t){var i="function"==typeof parcelRequire&&parcelRequire,o="function"==typeof require&&require;function u(n,t){if(!r[n]){if(!e[n]){var f="function"==typeof parcelRequire&&parcelRequire;if(!t&&f)return f(n,!0);if(i)return i(n,!0);if(o&&"string"==typeof n)return o(n);var c=new Error("Cannot find module '"+n+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[n][1][r]||r};var l=r[n]=new u.Module(n);e[n][0].call(l.exports,p,l,l.exports,this)}return r[n].exports;function p(e){return u(p.resolve(e))}}u.isParcelRequire=!0,u.Module=function(e){this.id=e,this.bundle=u,this.exports={}},u.modules=e,u.cache=r,u.parent=i,u.register=function(r,n){e[r]=[function(e,r){r.exports=n},{}]};for(var f=0;f<n.length;f++)u(n[f]);if(n.length){var c=u(n[n.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=c:"function"==typeof define&&define.amd?define(function(){return c}):t&&(this[t]=c)}return u}({18:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});class e{constructor(e){this.name=e}}exports.Token=e;class s extends e{}exports.InjectionToken=s;
},{}],140:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../Token");class t extends Error{constructor(i){super(),this.name="ServiceNotFoundError","string"==typeof i?this.message=`Service '${i}' was not found, looks like it was not registered in the container. `+`Register it by calling Container.set('${JSON.stringify(i)}', ...) before using service.`:i instanceof e.Token&&i.name?this.message=`Service '${i.name}' was not found, looks like it was not registered in the container. `+"Register it by calling Container.set before using service.":i instanceof e.Token&&(this.message="Service with a given token was not found, looks like it was not registered in the container. Register it by calling Container.set before using service."),Object.setPrototypeOf(this,t.prototype)}}exports.ServiceNotFoundError=t;
},{"../Token":18}],141:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});class e extends Error{constructor(r){super(`Cannot determine a class of the requesting service '${JSON.stringify(r)}'`),this.name="ServiceNotFoundError",Object.setPrototypeOf(this,e.prototype)}}exports.MissingProvidedServiceTypeError=e;
},{}],173:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});class t{constructor(){this._constructors=new Map}getConstructor(t){return this._constructors.get(t)}getByClass(t){return this._constructors.get(t.name).value}createConstructor(t,r){return this._constructors.has(t)?this.getConstructor(t):(this._constructors.set(t,r),this.getConstructor(t))}triggerOnInit(t){const r=this._constructors.get(t.name);r.value&&r.value.OnInit&&r.value.OnInit.bind(r.value)()}}exports.ConstructorWatcherService=t,exports.constructorWatcherService=new t;
},{}],74:[function(require,module,exports) {
"use strict";function e(e){for(var r in e)exports.hasOwnProperty(r)||(exports[r]=e[r])}Object.defineProperty(exports,"__esModule",{value:!0}),e(require("./constructor-watcher"));
},{"./constructor-watcher":173}],17:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("./Token"),t=require("./error/ServiceNotFoundError"),i=require("./error/MissingProvidedServiceTypeError"),r=require("./Container"),n=require("../services/constructor-watcher");class s{constructor(e){this.services=[],this.id=e}has(e){return!!this.findService(e)}get(e){const t=r.Container.of(void 0),i=t.findService(e),n=this.findService(e);if(i&&!0===i.global)return this.getServiceValue(e,i);if(n)return this.getServiceValue(e,n);if(i&&this!==t){const t=Object.assign({},i);t.value=void 0;const r=this.getServiceValue(e,t);return this.set(e,r),r}return this.getServiceValue(e,i)}getMany(e){return this.filterServices(e).map(t=>this.getServiceValue(e,t))}set(t,i){if(t instanceof Array)return t.forEach(e=>this.set(e)),this;if("string"==typeof t||t instanceof e.Token)return this.set({id:t,value:i});if(t instanceof Function)return this.set({type:t,id:t,value:i});const r=t,n=this.findService(r.id);return n&&!0!==n.multiple?Object.assign(n,r):this.services.push(r),this}remove(...e){return e.forEach(e=>{this.filterServices(e).forEach(e=>{this.services.splice(this.services.indexOf(e),1)})}),this}reset(){return this.services=[],this}filterServices(e){return this.services.filter(t=>t.id?t.id===e:!!(t.type&&e instanceof Function)&&(t.type===e||e.prototype instanceof t.type))}findService(e){return this.services.find(t=>t.id?t.id===e:!!(t.type&&e instanceof Function)&&t.type===e)}getServiceValue(r,s){if(s&&null!==s.value&&void 0!==s.value)return s.value;if(!(s&&s.type||s&&s.factory||!("string"==typeof r||r instanceof e.Token)))throw new t.ServiceNotFoundError(r);let o=void 0;if(s&&s.type?o=s.type:s&&s.id instanceof Function?o=s.id:r instanceof Function&&(o=r),!s){if(!o)throw new i.MissingProvidedServiceTypeError(r);s={type:o},this.services.push(s)}const c=o&&Reflect&&Reflect.getMetadata?Reflect.getMetadata("design:paramtypes",o):void 0;let a,u=c?this.initializeParams(o,c):[];if(s.factory)u=u.filter(e=>void 0!==e),a=s.factory instanceof Array?this.get(s.factory[0])[s.factory[1]](...u):s.factory(...u);else{if(!o)throw new i.MissingProvidedServiceTypeError(r);u.unshift(null),u.push(this),o.prototype.OnBefore&&o.prototype.OnBefore.bind(o)(),(a=new(o.bind.apply(o,u))).OnInit&&a.OnInit.bind(a)(),n.constructorWatcherService.createConstructor(o.name,{type:o,value:a})}return s&&!s.transient&&a&&(s.value=a),o&&this.applyPropertyHandlers(o,a),a}initializeParams(e,t){return t.map((t,i)=>{const n=r.Container.handlers.find(t=>t.object===e&&t.index===i);return n?n.value(this):t&&t.name&&!this.isTypePrimitive(t.name)?this.get(t):void 0})}isTypePrimitive(e){return-1!==["string","boolean","number","object"].indexOf(e.toLowerCase())}applyPropertyHandlers(e,t){r.Container.handlers.forEach(i=>{"number"!=typeof i.index&&(i.object.constructor===e||e.prototype instanceof i.object.constructor)&&(t[i.propertyName]=i.value(this))})}}exports.ContainerInstance=s;
},{"./Token":18,"./error/ServiceNotFoundError":140,"./error/MissingProvidedServiceTypeError":141,"./Container":16,"../services/constructor-watcher":74}],16:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const t=require("./ContainerInstance");class s{static of(s){if(void 0===s)return this.globalInstance;let e=this.instances.find(t=>t.id===s);return e||(e=new t.ContainerInstance(s),this.instances.push(e)),e}static has(t){return this.globalInstance.has(t)}static get(t){return this.globalInstance.get(t)}static getMany(t){return this.globalInstance.getMany(t)}static set(t,s){return this.globalInstance.set(t,s),this}static remove(...t){return this.globalInstance.remove(...t),this}static reset(t){if(t){const s=this.instances.find(s=>s.id===t);s&&(s.reset(),this.instances.splice(this.instances.indexOf(s),1))}else this.globalInstance.reset(),this.instances.forEach(t=>t.reset());return this}static registerHandler(t){return this.handlers.push(t),this}static import(t){return this}}s.globalInstance=new t.ContainerInstance(void 0),s.instances=[],s.handlers=[],exports.Container=s;
},{"./ContainerInstance":17}],20:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("crypto");function t(t){return e.createHash("md5").update(t).digest("hex")}exports.createUniqueHash=t;
},{}],22:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../Container"),t=require("../Token"),n=require("../../helpers/create-unique-hash");function r(r){return function(a){const i=n.createUniqueHash(`${a}`);Object.defineProperty(a,"originalName",{value:a.name||a.constructor.name,writable:!1}),Object.defineProperty(a,"name",{value:i,writable:!0}),a.metadata={useFactory:r&&r.useFactory||null,provideIn:r&&r.provideIn||"root",options:r||null,moduleName:a.originalName,moduleHash:i,type:"service",raw:`\n            ---- @Service '${a.name}' metadata----\n            @Service()\n            ${a.originalName}\n            `};const o={type:a};"string"==typeof r||r instanceof t.Token?(o.id=r,o.multiple=r.multiple,o.global=r.global||!1,o.transient=r.transient):r&&(o.id=r.id,o.factory=r.factory,o.multiple=r.multiple,o.global=r.global||!1,o.transient=r.transient),e.Container.set(o)}}exports.Service=r;
},{"../Container":16,"../Token":18,"../../helpers/create-unique-hash":20}],23:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../Token"),t=require("../Container"),n=require("../../helpers/create-unique-hash");function r(r){return function(o){const a=o;a.prototype._plugin=!0;const i=n.createUniqueHash(`${o}`);Object.defineProperty(o,"originalName",{value:o.name||o.constructor.name,writable:!1}),Object.defineProperty(o,"name",{value:i,writable:!0}),o.metadata={useFactory:r&&r.useFactory||null,provideIn:r&&r.provideIn||"root",options:r||null,moduleName:o.originalName,moduleHash:o.name,raw:`${o}`,type:"plugin"};const l={type:a};"string"==typeof r||r instanceof e.Token?(l.multiple=r.multiple,l.global=r.global||!1,l.transient=r.transient):r&&(l.id=r.id,l.factory=r.factory,l.multiple=r.multiple,l.global=r.global||!1,l.transient=r.transient),t.Container.set(l)}}exports.Plugin=r;
},{"../Token":18,"../Container":16,"../../helpers/create-unique-hash":20}],148:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});class e extends Error{constructor(t,r){super(`Cannot inject value into '${t.constructor.name}.${r}'. `+"Please make sure you setup reflect-metadata properly and you don't use interfaces without service tokens as injection value."),this.name="ServiceNotFoundError",Object.setPrototypeOf(this,e.prototype)}}exports.CannotInjectError=e;
},{}],24:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../Container"),r=require("../Token"),t=require("../error/CannotInjectError");function n(n){return function(o,i,a){n||(n=(()=>Reflect.getMetadata("design:type",o,i))),e.Container.registerHandler({object:o,propertyName:i,index:a,value:e=>{let a;if((a="string"==typeof n?n:n instanceof r.Token?n:n())===Object)throw new t.CannotInjectError(o,i);return e.get(a)}})}}exports.Inject=n;
},{"../Container":16,"../Token":18,"../error/CannotInjectError":148}],25:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../Container"),r=require("../Token"),t=require("../error/CannotInjectError");function n(n){return function(o,i,a){n||(n=(()=>Reflect.getMetadata("design:type",o,i))),e.Container.registerHandler({object:o,propertyName:i,index:a,value:e=>{let a;if((a="string"==typeof n?n:n instanceof r.Token?n:n())===Object)throw new t.CannotInjectError(o,i);return e.getMany(a)}})}}exports.InjectMany=n;
},{"../Container":16,"../Token":18,"../error/CannotInjectError":148}],26:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});
},{}],80:[function(require,module,exports) {
"use strict";function e(e){for(var r in e)exports.hasOwnProperty(r)||(exports[r]=e[r])}Object.defineProperty(exports,"__esModule",{value:!0}),e(require("./on-before")),e(require("./on-init"));
},{"./on-before":26,"./on-init":26}],4:[function(require,module,exports) {
"use strict";function e(e){for(var r in e)exports.hasOwnProperty(r)||(exports[r]=e[r])}Object.defineProperty(exports,"__esModule",{value:!0}),e(require("./decorators/Service")),e(require("./decorators/Plugin")),e(require("./decorators/Inject")),e(require("./decorators/InjectMany"));var r=require("./Container");exports.Container=r.Container;var t=require("./ContainerInstance");exports.ContainerInstance=t.ContainerInstance;var i=require("./types/Handler");exports.Handler=i.Handler;var n=require("./types/ServiceOptions");exports.ServiceOptions=n.ServiceOptions;var o=require("./types/ServiceIdentifier");exports.ServiceIdentifier=o.ServiceIdentifier;var a=require("./types/ServiceMetadata");exports.ServiceMetadata=a.ServiceMetadata;var s=require("./types/ObjectType");exports.ObjectType=s.ObjectType;var c=require("./Token");exports.InjectionToken=c.Token,e(require("./types/hooks"));
},{"./decorators/Service":22,"./decorators/Plugin":23,"./decorators/Inject":24,"./decorators/InjectMany":25,"./Container":16,"./ContainerInstance":17,"./types/Handler":26,"./types/ServiceOptions":26,"./types/ServiceIdentifier":26,"./types/ServiceMetadata":26,"./types/ObjectType":26,"./Token":18,"./types/hooks":80}],163:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("rxjs"),t=require("rxjs/operators");class i{constructor(t){this.items=new e.BehaviorSubject([]),this.map=new Map,this.name=t.name,this.config=t.config,this.initHook(t)}get(e){return this.map.get(e)}initHook(e){this.config.maxAge&&this.onExpireAll(e)}onExpireAll(e){e.items.forEach(e=>this.onExpire(e.key))}putItemHook(e){this.config.maxAge&&this.onExpire(e.key)}getItem(e){return this.map.has(e)?this.get(e):null}putItem(e){this.map.set(e.key,e);const t=this.get(e.key),i=this.items.getValue().filter(t=>t.key!==e.key);return this.items.next([...i,t]),this.putItemHook(e),e}onExpire(t){e.Observable.create(e=>e.next()).timeoutWith(this.config.maxAge,e.of(1)).skip(1).subscribe(()=>this.removeItem(t))}removeItem(e){const t=this.items.getValue().filter(t=>t.key!==e);this.map.delete(e),this.items.next(t)}getItemObservable(e){return this.items.asObservable().pipe(t.filter(()=>!!this.map.has(e)),t.map(()=>this.map.get(e)))}flushCache(){return this.items.asObservable().pipe(t.map(e=>(e.forEach(e=>this.removeItem(e.key)),!0)))}}exports.CacheLayer=i;
},{}],182:[function(require,module,exports) {
"use strict";function e(e){return e.reduce((e,t)=>(e[t]=t,e),Object.create(null))}Object.defineProperty(exports,"__esModule",{value:!0}),exports.InternalEvents=e(["load","init","config"]),exports.InternalLayers=e(["globalConfig","modules"]);
},{}],167:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});class e{constructor(){this.logging="true"===process.env.LOGGING,this.hashes=!0,this.date=!0,this.exitHandler=!0,this.fileService=!0}}exports.LoggerConfig=e;class s{}exports.PrivateCryptoModel=s;class t{}exports.ExperimentalFeatures=t;class i{}exports.InitOptionsConfig=i;class o{constructor(){this.init=!0,this.initOptions=new i,this.experimental=new t,this.logger=new e}}exports.ConfigModel=o;
},{}],168:[function(require,module,exports) {
"use strict";var e=this&&this.__decorate||function(e,t,r,o){var c,i=arguments.length,n=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,o);else for(var s=e.length-1;s>=0;s--)(c=e[s])&&(n=(i<3?c(n):i>3?c(t,r,n):c(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n};Object.defineProperty(exports,"__esModule",{value:!0});const t=require("../../container"),r=require("./config.model");let o=class{constructor(){this.config=new r.ConfigModel}setConfig(e){Object.assign(this.config,e)}};o=e([t.Service()],o),exports.ConfigService=o;
},{"../../container":4,"./config.model":167}],70:[function(require,module,exports) {
"use strict";function e(e){for(var r in e)exports.hasOwnProperty(r)||(exports[r]=e[r])}Object.defineProperty(exports,"__esModule",{value:!0}),e(require("./config.model")),e(require("./config.service"));
},{"./config.model":167,"./config.service":168}],152:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../../container");function t(t){return function(n,r,o){const c=e.Container.get(t);n[r]=c}}exports.Injector=t;
},{"../../container":4}],161:[function(require,module,exports) {
"use strict";var e,o=this&&this.__decorate||function(e,o,t,r){var i,c=arguments.length,n=c<3?o:null===r?r=Object.getOwnPropertyDescriptor(o,t):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,o,t,r);else for(var g=e.length-1;g>=0;g--)(i=e[g])&&(n=(c<3?i(n):c>3?i(o,t,n):i(o,t))||n);return c>3&&n&&Object.defineProperty(o,t,n),n},t=this&&this.__metadata||function(e,o){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,o)};Object.defineProperty(exports,"__esModule",{value:!0});const r=require("../../container"),i=require("../config"),c=require("../../decorators/injector/injector.decorator");let n=class{log(e){if(this.configService.config.logger.logging){const o=[this.logDate(),e];return console.log(...o),o}}error(e){console.error(e)}logImporter(e){if(this.configService.config.logger.logging)return this.log(e)}logDate(){return this.configService.config.logger.date?`${Date.now().toPrecision()}`:""}logFileService(e){if(this.configService.config.logger.fileService)return this.log(e),"``"}logHashes(e){return this.configService.config.logger.hashes?e:""}logExitHandler(e){if(!this.configService.config.logger.exitHandler)return"";this.log(e)}};o([c.Injector(i.ConfigService),t("design:type","function"==typeof(e=void 0!==i.ConfigService&&i.ConfigService)&&e||Object)],n.prototype,"configService",void 0),n=o([r.Service()],n),exports.BootstrapLogger=n;
},{"../../container":4,"../config":70,"../../decorators/injector/injector.decorator":152}],64:[function(require,module,exports) {
"use strict";function e(e){for(var r in e)exports.hasOwnProperty(r)||(exports[r]=e[r])}Object.defineProperty(exports,"__esModule",{value:!0}),e(require("./bootstrap-logger"));
},{"./bootstrap-logger":161}],162:[function(require,module,exports) {
"use strict";var e,t,a=this&&this.__decorate||function(e,t,a,r){var n,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,a):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,a,r);else for(var i=e.length-1;i>=0;i--)(n=e[i])&&(o=(s<3?n(o):s>3?n(t,a,o):n(t,a))||o);return s>3&&o&&Object.defineProperty(t,a,o),o},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(exports,"__esModule",{value:!0});const n=require("rxjs"),s=require("rxjs/operators"),o=require("../cache/cache-layer"),i=require("../../helpers/events"),c=require("../../container"),h=require("../bootstrap-logger"),m={TRY_TO_UNSUBSCRIBE:"Someone try to unsubscribe from collection directly... agghhh.. read docs! Blame: "};let l=e=class{constructor(e){this.logger=e,this._cachedLayers=new n.BehaviorSubject([]),this.map=new Map,this.config={}}static createCacheInstance(e){return new o.CacheLayer(e)}getLayer(e){return this.map.has(e)?this.map.get(e):this.createLayer({name:e})}getLayersByName(e){const t=Array.from(this.map.keys()),a=[];return t.forEach(t=>{if(t!==i.InternalLayers.modules&&t!==i.InternalLayers.globalConfig){const r=this.getLayer(t).getItem(i.InternalEvents.config);r&&r.data&&e===r.data.moduleName&&a.push(this.getLayer(r.data.moduleHash))}}),a}searchForDuplicateDependenciesInsideApp(){const e=[];Array.from(this.map.keys()).forEach(t=>{const a=this.getLayer(t),r=Array.from(a.map.keys());r.forEach(t=>{t!==i.InternalEvents.load&&t!==i.InternalEvents.config&&t!==i.InternalEvents.init&&e.push(t)});const n=this.getLayer(t);if(n.getItem(i.InternalEvents.config)){const e=[];r.filter(e=>!!e).filter(e=>e.length>=32).forEach(t=>e.push(n.getItem(t).data.metadata.moduleName))}});const t=e.map(e=>Object.create({count:1,name:e})).reduce((e,t)=>(e[t.name]=(e[t.name]||0)+t.count,e),{}),a=Object.keys(t).filter(e=>t[e]>1);if(a.length){const e=this.searchForDuplicatesByHash(a[0]),t=e[0].class.metadata.type.charAt(0).toUpperCase()+e[0].class.metadata.type.slice(1);throw new Error(`\n                ${e[0].class.metadata.raw}\n                ${t}: '${e[0].originalName}' found multiple times!\n                ${t} hash: ${e[0].moduleHash}\n                Modules: [${e[0].moduleName}, ${e[1].moduleName}]\n\n                Hint: '${e[0].originalName}' class identity hash is identical in both\n                imported files inside ${e[0].moduleName} and ${e[1].moduleName}\n                consider removing one of the '${e[0].originalName}'\n            `)}return a}searchForItem(e){let t;return Array.from(this.map.keys()).forEach(a=>{const r=this.getLayer(a),n=Array.from(r.map.keys()).filter(t=>t===i.InternalEvents.config||t===i.InternalEvents.load||t===i.InternalEvents.init?void 0:t===e.name);n.length&&(t=r.getItem(n[0]).data)}),t}searchForDuplicatesByHash(e){let t=[];return Array.from(this.map.keys()).forEach(a=>{const r=this.getLayer(a),n=Array.from(r.map.keys()).filter(t=>{if(t!==i.InternalEvents.config&&t!==i.InternalEvents.load&&t!==i.InternalEvents.init)return t===e});if(n.length){const e=r.getItem(n[0]),s=this.getLayer(a).getItem(i.InternalEvents.config);t=[...t,{moduleName:s.data.moduleName,moduleHash:s.data.moduleHash,originalName:e.data.originalName,dupeName:e.key,raw:s.data.raw,class:e.data}]}}),t}createLayer(t){if(this.map.has(t.name))return this.map.get(t.name);t.items=t.items||[],t.config=t.config||this.config;const a=e.createCacheInstance(t);return this.map.set(a.name,a),this._cachedLayers.next([...this._cachedLayers.getValue(),a]),this.LayerHook(a),a}LayerHook(e){this.protectLayerFromInvaders(e),(e.config.cacheFlushInterval||this.config.cacheFlushInterval)&&this.OnExpire(e)}protectLayerFromInvaders(e){e.items.constructor.prototype.unsubsribeFromLayer=e.items.constructor.prototype.unsubscribe,e.items.constructor.prototype.unsubscribe=(()=>{console.error(m.TRY_TO_UNSUBSCRIBE+e.name)})}OnExpire(e){n.Observable.create(e=>e.next()).timeoutWith(e.config.cacheFlushInterval||this.config.cacheFlushInterval,n.of(1)).skip(1).subscribe(t=>this.removeLayer(e))}removeLayer(e){this.map.delete(e.name),this._cachedLayers.next([...this._cachedLayers.getValue().filter(t=>t.name!==e.name)])}transferItems(e,t){const a=this.getLayer(e),r=[];return t.forEach(e=>{const t=this.createLayer(e);a.items.getValue().forEach(e=>t.putItem(e)),r.push(t)}),r}flushCache(){let e;return this._cachedLayers.pipe(s.take(1),s.map(t=>(e=t.map(e=>e.name),t.forEach(e=>this.removeLayer(e)),e.forEach(e=>this.createLayer({name:e})),!0)))}};l=e=a([c.Service(),r("design:paramtypes",["function"==typeof(t=void 0!==h.BootstrapLogger&&h.BootstrapLogger)&&t||Object])],l),exports.CacheService=l;
},{"../cache/cache-layer":163,"../../helpers/events":182,"../../container":4,"../bootstrap-logger":64}],164:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});class e{constructor(){this.deleteOnExpire="aggressive",this.cacheFlushInterval=36e5,this.maxAge=9e5,this.localStorage=!1}}exports.CacheServiceConfigInterface=e;
},{}],65:[function(require,module,exports) {
"use strict";function e(e){for(var r in e)exports.hasOwnProperty(r)||(exports[r]=e[r])}Object.defineProperty(exports,"__esModule",{value:!0}),e(require("./cache-layer.service")),e(require("./cache-layer")),e(require("./cache-layer.interfaces"));
},{"./cache-layer.service":162,"./cache-layer":163,"./cache-layer.interfaces":164}],31:[function(require,module,exports) {
"use strict";var e=this&&this.__decorate||function(e,t,r,i){var s,n=arguments.length,u=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(e,t,r,i);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(u=(n<3?s(u):n>3?s(t,r,u):s(t,r))||u);return n>3&&u&&Object.defineProperty(t,r,u),u};Object.defineProperty(exports,"__esModule",{value:!0});const t=require("rxjs"),r=require("../../container");let i=class{constructor(){this.plugins=new t.BehaviorSubject([]),this.beforePlugins=new t.BehaviorSubject([]),this.afterPlugins=new t.BehaviorSubject([])}register(e){this.plugins.next([...this.plugins.getValue(),e])}registerBefore(e){this.beforePlugins.next([...this.plugins.getValue(),e])}registerAfter(e){this.afterPlugins.next([...this.plugins.getValue(),e])}getPlugins(){return this.plugins.getValue()}getAfterPlugins(){return this.afterPlugins.getValue()}getBeforePlugins(){return this.beforePlugins.getValue()}};i=e([r.Service()],i),exports.PluginService=i;
},{"../../container":4}],165:[function(require,module,exports) {
"use strict";var e,t=this&&this.__decorate||function(e,t,r,o){var n,c=arguments.length,i=c<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(i=(c<3?n(i):c>3?n(t,r,i):n(t,r))||i);return c>3&&i&&Object.defineProperty(t,r,i),i},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(exports,"__esModule",{value:!0});const o=require("../../container"),n=require("../bootstrap-logger"),c=require("../../decorators/injector/injector.decorator"),i=require("rxjs");let a=class{constructor(){this.errorHandler=new i.Subject}init(){}exitHandler(e,t){this.errorHandler.next(t),e.cleanup&&this.logger.logExitHandler("AppStopped"),t&&console.log(t.stack),e.exit&&this.logger.logExitHandler("Unhandled error rejection")}onExitApp(e){return new i.Observable(e=>{process.on(event,()=>e.next(!0))})}};t([c.Injector(n.BootstrapLogger),r("design:type","function"==typeof(e=void 0!==n.BootstrapLogger&&n.BootstrapLogger)&&e||Object)],a.prototype,"logger",void 0),a=t([o.Service()],a),exports.ExitHandlerService=a;
},{"../../container":4,"../bootstrap-logger":64,"../../decorators/injector/injector.decorator":152}],66:[function(require,module,exports) {
"use strict";function e(e){for(var r in e)exports.hasOwnProperty(r)||(exports[r]=e[r])}Object.defineProperty(exports,"__esModule",{value:!0}),e(require("./exit-handler.service"));
},{"./exit-handler.service":165}],185:[function(require,module,exports) {
"use strict";var e=this&&this.__decorate||function(e,r,t,o){var n,s=arguments.length,c=s<3?r:null===o?o=Object.getOwnPropertyDescriptor(r,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,r,t,o);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(c=(s<3?n(c):s>3?n(r,t,c):n(r,t))||c);return s>3&&c&&Object.defineProperty(r,t,c),c};Object.defineProperty(exports,"__esModule",{value:!0});const r=require("../../container"),t=require("rxjs"),o=require("http"),n=require("https");let s=class{get(e){return new t.Observable(r=>{e.includes("https://")?n.get(e,e=>{let t="";e.on("data",e=>t+=e),e.on("end",()=>r.next(t))}).on("error",e=>{console.error("Error: "+e.message),r.error(e)}):o.get(e,e=>{let t="";e.on("data",e=>t+=e),e.on("end",()=>r.next(t))}).on("error",e=>{console.error("Error: "+e.message),r.error(e)})})}};s=e([r.Service()],s),exports.RequestService=s;
},{"../../container":4}],184:[function(require,module,exports) {
"use strict";function e(e){for(var r in e)exports.hasOwnProperty(r)||(exports[r]=e[r])}Object.defineProperty(exports,"__esModule",{value:!0}),e(require("./request.service"));
},{"./request.service":185}],169:[function(require,module,exports) {
"use strict";var e,r=this&&this.__decorate||function(e,r,t,o){var i,n=arguments.length,c=n<3?r:null===o?o=Object.getOwnPropertyDescriptor(r,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,r,t,o);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(c=(n<3?i(c):n>3?i(r,t,c):i(r,t))||c);return n>3&&c&&Object.defineProperty(r,t,c),c},t=this&&this.__metadata||function(e,r){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,r)},o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)Object.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r.default=e,r};Object.defineProperty(exports,"__esModule",{value:!0});const i=require("../../container"),n=require("fs"),c=o(require("mkdirp")),l=require("rxjs"),s=require("rxjs/operators"),a=require("../bootstrap-logger"),u=require("../../decorators/injector/injector.decorator"),f=require("path");let p=class{writeFileSync(e,r,t,o){return this.mkdirp(e).pipe(s.map(()=>(this.logger.logFileService(`Bootstrap: @Service('${r}'): Saved inside ${e}`),n.writeFileSync(`${e}/${r}`,o))))}isPresent(e){return n.existsSync(e)}mkdirp(e){return l.Observable.create(r=>{c(e,e=>{e?(console.error(e),r.error(!1)):r.next(!0)})})}fileWalker(e){return l.Observable.create(r=>{this.filewalker(e,(e,t)=>{e?r.error(e):r.next(t)})})}filewalker(e,r){let t=[];const o=this.filewalker.bind(this);n.readdir(e,function(i,c){if(i)return r(i);let l=c.length;if(!l)return r(null,t);c.forEach(function(i){i=f.resolve(e,i),n.stat(i,function(e,n){n&&n.isDirectory()?(t.push(i),o(i,function(e,o){t=t.concat(o),--l||r(null,t)})):(t.push(i),--l||r(null,t))})})})}};r([u.Injector(a.BootstrapLogger),t("design:type","function"==typeof(e=void 0!==a.BootstrapLogger&&a.BootstrapLogger)&&e||Object)],p.prototype,"logger",void 0),p=r([i.Service()],p),exports.FileService=p;
},{"../../container":4,"../bootstrap-logger":64,"../../decorators/injector/injector.decorator":152}],71:[function(require,module,exports) {
"use strict";function e(e){for(var r in e)exports.hasOwnProperty(r)||(exports[r]=e[r])}Object.defineProperty(exports,"__esModule",{value:!0}),e(require("./file.service"));
},{"./file.service":169}],174:[function(require,module,exports) {
"use strict";var e,r=this&&this.__decorate||function(e,r,t,i){var c,o=arguments.length,n=o<3?r:null===i?i=Object.getOwnPropertyDescriptor(r,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,r,t,i);else for(var p=e.length-1;p>=0;p--)(c=e[p])&&(n=(o<3?c(n):o>3?c(r,t,n):c(r,t))||n);return o>3&&n&&Object.defineProperty(r,t,n),n},t=this&&this.__metadata||function(e,r){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,r)};Object.defineProperty(exports,"__esModule",{value:!0});const i=require("fs"),c=require("zlib"),o=require("crypto"),n=require("rxjs"),p=require("../../container"),a=require("../../decorators/injector/injector.decorator"),f=require("../config");let s=class{gZipFile(e,r,t={cyperIv:"",algorithm:"",cyperKey:""}){const p=this.config.config.experimental.crypto||t;return n.Observable.create(t=>{i.createReadStream(e).pipe(c.createGzip()).pipe(o.createCipheriv(p.algorithm,p.cyperKey,p.cyperIv)).pipe(i.createWriteStream(r)).on("finish",()=>t.next(!0)).on("error",e=>t.error(e))})}readGzipFile(e,r,t={cyperIv:"",algorithm:"",cyperKey:""}){const p=this.config.config.experimental.crypto||t;return n.Observable.create(t=>{i.createReadStream(e).pipe(o.createDecipheriv(p.algorithm,p.cyperKey,p.cyperIv)).pipe(c.createGunzip()).pipe(i.createWriteStream(r)).on("finish",()=>t.next(!0)).on("error",e=>t.error(e))})}};r([a.Injector(f.ConfigService),t("design:type","function"==typeof(e=void 0!==f.ConfigService&&f.ConfigService)&&e||Object)],s.prototype,"config",void 0),s=r([p.Service()],s),exports.CompressionService=s;
},{"../../container":4,"../../decorators/injector/injector.decorator":152,"../config":70}],159:[function(require,module,exports) {
"use strict";var e,t,r,o,i,n=this&&this.__decorate||function(e,t,r,o){var i,n=arguments.length,c=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,r,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(c=(n<3?i(c):n>3?i(t,r,c):i(t,r))||c);return n>3&&c&&Object.defineProperty(t,r,c),c},c=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=this&&this.__awaiter||function(e,t,r,o){return new(r||(r=Promise))(function(i,n){function c(e){try{p(o.next(e))}catch(e){n(e)}}function s(e){try{p(o.throw(e))}catch(e){n(e)}}function p(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(c,s)}p((o=o.apply(e,t||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0});const p=require("../../container"),a=require("rxjs"),l=require("../request"),f=require("../file"),d=require("rxjs/operators"),u=require("../bootstrap-logger/bootstrap-logger"),g=require("../../decorators/injector/injector.decorator"),v=require("systemjs"),m=require("../compression/compression.service"),h=require("../config");let y=class{importExternalModule(e){return a.from(v.import(e))}validateConfig(e){if(!e)throw new Error("Bootstrap: missing config")}encryptFile(e){return this.configService.config.experimental.crypto?this.compressionService.readGzipFile(e,"dada"):a.of(null)}decryptFile(e){return this.configService.config.experimental.crypto?this.compressionService.gZipFile(e,"dada"):a.of(null)}isWeb(){let e=!1;try{window&&(e=!0)}catch(e){}return e}importModule(e,t){return this.validateConfig(e),this.isWeb()?(v.config(Object.assign({map:{[t]:e.link}},e.SystemJsConfig)),v.import(e.link)):a.Observable.create(t=>s(this,void 0,void 0,function*(){const r=e.fileName,o=e.namespace,i=e.link,n=e.extension,c=e.SystemJsConfig||{},s=e.outputFolder||"/external_modules/",p=`${process.cwd()}${s}/${o}/${r}.${n}`,a=`${process.cwd()}${s}${o}`,l=`${r}.${n}`;Object.assign(c,{paths:Object.assign({[r]:p},c.paths)}),v.config(c),this.fileService.isPresent(p)?(this.logger.logImporter(`Bootstrap -> @Service('${r}'): present inside .${s}${o}/${r}.${n} folder and loaded from there`),this.importExternalModule(r).pipe(d.take(1)).subscribe(e=>t.next(e),e=>t.error(e))):(this.logger.logImporter(`Bootstrap -> @Service('${r}'): will be downloaded inside .${s}${o}/${r}.${n} folder and loaded from there`),this.logger.logImporter(`Bootstrap -> @Service('${r}'): ${i} downloading...`),this.requestService.get(i).pipe(d.take(1),d.map(e=>(this.logger.logImporter("Done!"),e)),d.switchMap(e=>this.fileService.writeFileSync(a,l,o,e)),d.switchMap(()=>this.importExternalModule(r))).subscribe(e=>t.next(e),e=>t.error(e)))}))}};n([g.Injector(l.RequestService),c("design:type","function"==typeof(e=void 0!==l.RequestService&&l.RequestService)&&e||Object)],y.prototype,"requestService",void 0),n([g.Injector(f.FileService),c("design:type","function"==typeof(t=void 0!==f.FileService&&f.FileService)&&t||Object)],y.prototype,"fileService",void 0),n([g.Injector(u.BootstrapLogger),c("design:type","function"==typeof(r=void 0!==u.BootstrapLogger&&u.BootstrapLogger)&&r||Object)],y.prototype,"logger",void 0),n([g.Injector(m.CompressionService),c("design:type","function"==typeof(o=void 0!==m.CompressionService&&m.CompressionService)&&o||Object)],y.prototype,"compressionService",void 0),n([g.Injector(h.ConfigService),c("design:type","function"==typeof(i=void 0!==h.ConfigService&&h.ConfigService)&&i||Object)],y.prototype,"configService",void 0),y=n([p.Service()],y),exports.ExternalImporter=y;
},{"../../container":4,"../request":184,"../file":71,"../bootstrap-logger/bootstrap-logger":161,"../../decorators/injector/injector.decorator":152,"../compression/compression.service":174,"../config":70}],160:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});class e{}exports.ExternalImporterConfig=e;
},{}],67:[function(require,module,exports) {
"use strict";function e(e){for(var r in e)exports.hasOwnProperty(r)||(exports[r]=e[r])}Object.defineProperty(exports,"__esModule",{value:!0}),e(require("./external-importer")),e(require("./external-importer-config"));
},{"./external-importer":159,"./external-importer-config":160}],183:[function(require,module,exports) {
"use strict";var e=this&&this.__decorate||function(e,t,r,c){var o,a=arguments.length,s=a<3?t:null===c?c=Object.getOwnPropertyDescriptor(t,r):c;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,c);else for(var i=e.length-1;i>=0;i--)(o=e[i])&&(s=(a<3?o(s):a>3?o(t,r,s):o(t,r))||s);return a>3&&s&&Object.defineProperty(t,r,s),s};Object.defineProperty(exports,"__esModule",{value:!0});const t=require("../../container");let r=class{constructor(){this.lazyFactories=new Map}setLazyFactory(e,t){return this.lazyFactories.set(e,t),this.getLazyFactory(e)}getLazyFactory(e){return this.lazyFactories.get(e)}};r=e([t.Service()],r),exports.LazyFactory=r;
},{"../../container":4}],179:[function(require,module,exports) {
"use strict";var e=this&&this.__decorate||function(e,t,a,r){var o,i=arguments.length,d=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,a):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)d=Reflect.decorate(e,t,a,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(d=(i<3?o(d):i>3?o(t,a,d):o(t,a))||d);return i>3&&d&&Object.defineProperty(t,a,d),d};Object.defineProperty(exports,"__esModule",{value:!0});const t=require("../../../container");let a=class{validateEmpty(e,t,a){if(!e){const e=a.charAt(0).toUpperCase()+a.slice(1);throw new Error(`\n            ${t.metadata.raw}\n            -> @Module: ${t.metadata.moduleName}\n            -> @Module hash: ${t.metadata.moduleHash}\n                --\x3e Maybe you forgot to import some ${e} inside ${t.metadata.moduleName} ?\n\n                Hint: run ts-lint again, looks like imported ${e} is undefined or null inside ${t.metadata.moduleName}\n            `)}}genericWrongPluggableError(e,t,a){if(e.metadata.type!==a){const r=e.metadata.type.charAt(0).toUpperCase()+e.metadata.type.slice(1),o=a.charAt(0).toUpperCase()+a.slice(1);throw new Error(`\n            ${t.metadata.raw}\n            -> @Module: '${t.metadata.moduleName}'\n            -> @Module hash: '${t.metadata.moduleHash}'\n                --\x3e @${r} '${e.metadata.moduleName}' provided, where expected class decorated with '@${o}' instead,\n            -> @Hint: please provide class with @Service decorator or remove ${e.metadata.moduleName} class\n            `)}}validateImports(e,t){if("module"!==e.metadata.type)throw new Error(`\n            ${t.metadata.raw}\n            -> @Module: '${t.metadata.moduleName}'\n            -> @Module hash: '${t.metadata.moduleHash}'\n                --\x3e @${e.metadata.type.charAt(0).toUpperCase()+e.metadata.type.slice(1)} '${e.originalName}' provided, where expected class decorated with '@Module' instead,\n            -> @Hint: please provide class with @Module decorator or remove ${e.originalName} from imports\n            `)}validateServices(e,t){this.validateEmpty(e,t,"service"),e.provide||this.genericWrongPluggableError(e,t,"service")}validatePlugin(e,t){this.validateEmpty(e,t,"plugin"),e.provide||this.genericWrongPluggableError(e,t,"plugin")}validateController(e,t){this.validateEmpty(e,t,"controller"),e.provide||this.genericWrongPluggableError(e,t,"controller")}validateEffect(e,t){this.validateEmpty(e,t,"effect"),e.provide||this.genericWrongPluggableError(e,t,"effect")}validateComponent(e,t){this.validateEmpty(e,t,"component"),e.provide||this.genericWrongPluggableError(e,t,"component")}};a=e([t.Service()],a),exports.ModuleValidators=a;
},{"../../../container":4}],175:[function(require,module,exports) {
"use strict";var e=this&&this.__decorate||function(e,t,r,o){var c,l=arguments.length,s=l<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,o);else for(var n=e.length-1;n>=0;n--)(c=e[n])&&(s=(l<3?c(s):l>3?c(t,r,s):c(t,r))||s);return l>3&&s&&Object.defineProperty(t,r,s),s};Object.defineProperty(exports,"__esModule",{value:!0});const t=require("../../container/decorators/Service"),r=require("rxjs");let o=class{constructor(){this.controllers=new r.BehaviorSubject([])}register(e){this.controllers.next([...this.controllers.getValue(),e])}getControllers(){return this.controllers.getValue()}};o=e([t.Service()],o),exports.ControllersService=o;
},{"../../container/decorators/Service":22}],176:[function(require,module,exports) {
"use strict";var e=this&&this.__decorate||function(e,t,r,c){var s,f=arguments.length,o=f<3?t:null===c?c=Object.getOwnPropertyDescriptor(t,r):c;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,c);else for(var i=e.length-1;i>=0;i--)(s=e[i])&&(o=(f<3?s(o):f>3?s(t,r,o):s(t,r))||o);return f>3&&o&&Object.defineProperty(t,r,o),o};Object.defineProperty(exports,"__esModule",{value:!0});const t=require("../../container/decorators/Service"),r=require("rxjs");let c=class{constructor(){this.effects=new r.BehaviorSubject([])}register(e){this.effects.next([...this.effects.getValue(),e])}getEffects(){return this.effects.getValue()}};c=e([t.Service()],c),exports.EffectsService=c;
},{"../../container/decorators/Service":22}],177:[function(require,module,exports) {
"use strict";var e=this&&this.__decorate||function(e,t,r,o){var n,c=arguments.length,s=c<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,o);else for(var i=e.length-1;i>=0;i--)(n=e[i])&&(s=(c<3?n(s):c>3?n(t,r,s):n(t,r))||s);return c>3&&s&&Object.defineProperty(t,r,s),s};Object.defineProperty(exports,"__esModule",{value:!0});const t=require("../../container/decorators/Service"),r=require("rxjs");let o=class{constructor(){this.components=new r.BehaviorSubject([])}register(e){this.components.next([...this.components.getValue(),e])}getComponents(){return this.components.getValue()}};o=e([t.Service()],o),exports.ComponentsService=o;
},{"../../container/decorators/Service":22}],172:[function(require,module,exports) {
"use strict";var e=this&&this.__decorate||function(e,t,r,o){var s,c=arguments.length,i=c<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,o);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(i=(c<3?s(i):c>3?s(t,r,i):s(t,r))||i);return c>3&&i&&Object.defineProperty(t,r,i),i};Object.defineProperty(exports,"__esModule",{value:!0});const t=require("../../container/decorators/Service"),r=require("rxjs");let o=class{constructor(){this.bootstraps=new r.BehaviorSubject([])}register(e){this.bootstraps.next([...this.bootstraps.getValue(),e])}getBootstraps(){return this.bootstraps.getValue()}};o=e([t.Service()],o),exports.BootstrapsServices=o;
},{"../../container/decorators/Service":22}],178:[function(require,module,exports) {
"use strict";var e=this&&this.__decorate||function(e,t,r,c){var s,i=arguments.length,o=i<3?t:null===c?c=Object.getOwnPropertyDescriptor(t,r):c;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,c);else for(var n=e.length-1;n>=0;n--)(s=e[n])&&(o=(i<3?s(o):i>3?s(t,r,o):s(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o};Object.defineProperty(exports,"__esModule",{value:!0});const t=require("../../container/decorators/Service"),r=require("rxjs");let c=class{constructor(){this.services=new r.BehaviorSubject([])}register(e){this.services.next([...this.services.getValue(),e])}getServices(){return this.services.getValue()}};c=e([t.Service()],c),exports.ServicesService=c;
},{"../../container/decorators/Service":22}],166:[function(require,module,exports) {
"use strict";var e,t,r,o,i,s,c,a,n,p=this&&this.__decorate||function(e,t,r,o){var i,s=arguments.length,c=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,r,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(s<3?i(c):s>3?i(t,r,c):i(t,r))||c);return s>3&&c&&Object.defineProperty(t,r,c),c},v=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(exports,"__esModule",{value:!0});const l=require("rxjs"),d=require("../../container"),u=require("../lazy-factory/lazy-factory.service"),y=require("../plugin/plugin.service"),f=require("../external-importer"),h=require("../../decorators/injector/injector.decorator"),m=require("./helpers/validators"),S=require("../constructor-watcher/constructor-watcher"),g=require("../controllers/controllers.service"),j=require("../effect/effect.service"),I=require("../components/components.service"),C=require("../bootstraps/bootstraps.service"),F=require("../services/services.service");let E=class{constructor(){this.watcherService=S.constructorWatcherService}setServices(e,t,r){e.forEach(e=>{this.validators.validateServices(e,t),this.setInjectedDependencies(e),e.provide&&e.provide.constructor===Function&&(e.provide=e.provide.name),e.provide&&e.useFactory?this.setUseFactory(e):e.provide&&e.useDynamic?this.setUseDynamic(e):e.provide&&e.useClass&&e.useClass.constructor===Function?this.setUseClass(e):e.provide&&e.useValue?this.setUseValue(e):(r.putItem({data:e,key:e.name}),this.servicesService.register(e))})}setInjectedDependencies(e){e.deps=e.deps||[],e.deps.length&&(e.deps=e.deps.map(e=>d.Container.get(e)))}setUseValue(e){d.Container.set(e.provide,e.useValue),e.lazy&&this.lazyFactoryService.setLazyFactory(e.provide,l.of(d.Container.get(e.provide)))}setUseClass(e){e.lazy?this.lazyFactoryService.setLazyFactory(e.provide,l.of(d.Container.get(e.useClass))):d.Container.set(e.provide,d.Container.get(e.useClass))}setUseDynamic(e){const t=this.externalImporter.importModule(e.useDynamic,e.provide);this.lazyFactoryService.setLazyFactory(e.provide,t)}setUseFactory(e){const t=e.useFactory;e.useFactory=(()=>t(...e.deps)),e.lazy?this.lazyFactoryService.setLazyFactory(e.provide,e.useFactory()):d.Container.set(e.provide,e.useFactory())}setControllers(e,t,r){e.forEach(e=>{this.validators.validateController(e,t),r.putItem({data:e,key:e.name}),this.controllersService.register(e)})}setEffects(e,t,r){e.forEach(e=>{this.validators.validateEffect(e,t),r.putItem({data:e,key:e.name}),this.effectsService.register(e)})}setComponents(e,t,r){e.forEach(e=>{this.validators.validateComponent(e,t),r.putItem({data:e,key:e.name}),this.componentsService.register(e)})}setPlugins(e,t,r){e.forEach(e=>{this.validators.validatePlugin(e,t),r.putItem({data:e,key:e.name}),this.pluginService.register(e)})}setBootstraps(e,t,r){e.forEach(e=>{this.validators.validateEmpty(e,t,e.metadata.type),r.putItem({data:e,key:e.name}),this.bootstraps.register(e)})}setAfterPlugins(e,t,r){e.forEach(e=>{this.validators.validatePlugin(e,t),r.putItem({data:e,key:e.name}),this.pluginService.registerAfter(e)})}setBeforePlugins(e,t,r){e.forEach(e=>{this.validators.validatePlugin(e,t),r.putItem({data:e,key:e.name}),this.pluginService.registerBefore(e)})}setImports(e,t){e.forEach(e=>{if(this.validators.validateImports(e,t),!e)throw new Error("Missing import module");d.Container.get(e)})}};p([h.Injector(u.LazyFactory),v("design:type","function"==typeof(e=void 0!==u.LazyFactory&&u.LazyFactory)&&e||Object)],E.prototype,"lazyFactoryService",void 0),p([h.Injector(y.PluginService),v("design:type","function"==typeof(t=void 0!==y.PluginService&&y.PluginService)&&t||Object)],E.prototype,"pluginService",void 0),p([h.Injector(I.ComponentsService),v("design:type","function"==typeof(r=void 0!==I.ComponentsService&&I.ComponentsService)&&r||Object)],E.prototype,"componentsService",void 0),p([h.Injector(g.ControllersService),v("design:type","function"==typeof(o=void 0!==g.ControllersService&&g.ControllersService)&&o||Object)],E.prototype,"controllersService",void 0),p([h.Injector(j.EffectsService),v("design:type","function"==typeof(i=void 0!==j.EffectsService&&j.EffectsService)&&i||Object)],E.prototype,"effectsService",void 0),p([h.Injector(C.BootstrapsServices),v("design:type","function"==typeof(s=void 0!==C.BootstrapsServices&&C.BootstrapsServices)&&s||Object)],E.prototype,"bootstraps",void 0),p([h.Injector(f.ExternalImporter),v("design:type","function"==typeof(c=void 0!==f.ExternalImporter&&f.ExternalImporter)&&c||Object)],E.prototype,"externalImporter",void 0),p([h.Injector(m.ModuleValidators),v("design:type","function"==typeof(a=void 0!==m.ModuleValidators&&m.ModuleValidators)&&a||Object)],E.prototype,"validators",void 0),p([h.Injector(F.ServicesService),v("design:type","function"==typeof(n=void 0!==F.ServicesService&&F.ServicesService)&&n||Object)],E.prototype,"servicesService",void 0),E=p([d.Service()],E),exports.ModuleService=E;
},{"../../container":4,"../lazy-factory/lazy-factory.service":183,"../plugin/plugin.service":31,"../external-importer":67,"../../decorators/injector/injector.decorator":152,"./helpers/validators":179,"../constructor-watcher/constructor-watcher":173,"../controllers/controllers.service":175,"../effect/effect.service":176,"../components/components.service":177,"../bootstraps/bootstraps.service":172,"../services/services.service":178}],68:[function(require,module,exports) {
"use strict";function e(e){for(var r in e)exports.hasOwnProperty(r)||(exports[r]=e[r])}Object.defineProperty(exports,"__esModule",{value:!0}),e(require("./module.service")),e(require("./helpers/validators"));
},{"./module.service":166,"./helpers/validators":179}],170:[function(require,module,exports) {
"use strict";var e,t,r=this&&this.__decorate||function(e,t,r,o){var a,n=arguments.length,i=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(n<3?a(i):n>3?a(t,r,i):a(t,r))||i);return n>3&&i&&Object.defineProperty(t,r,i),i},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(exports,"__esModule",{value:!0});const a=require("../../container"),n=require("../cache/cache-layer.service"),i=require("../../helpers/events"),c=require("rxjs/operators"),s=require("rxjs"),l=require("../bootstrap-logger/bootstrap-logger"),p=require("../../decorators/injector/injector.decorator");let d=class{resolveDependencies(e,t,r){this.cacheService.getLayer(i.InternalLayers.modules).putItem({key:e,data:t});const o=this.cacheService.getLayer(e);return o.putItem({key:i.InternalEvents.config,data:{moduleName:r,moduleHash:e}}),o.getItemObservable(i.InternalEvents.load).pipe(c.switchMap(e=>e.data?o.items.asObservable():s.of(null)),c.filter(e=>e&&e.length),c.map(this.resolveContainerDependencies(t,r)))}resolveContainerDependencies(e,t){return r=>(r.forEach(r=>{if(r.key===i.InternalEvents.load||r.key===i.InternalEvents.config)return;const o=this.cacheService.searchForItem(r.data);if(o){if(o.provide)return o;const r=o.metadata.type.charAt(0).toUpperCase()+o.metadata.type.slice(1);return this.bootstrapLogger.log(`Start -> @Module('${t}')${this.bootstrapLogger.logHashes(`(${e.name})`)}: @${r}('${o.originalName}')${this.bootstrapLogger.logHashes(`(${o.name})`)}`+" initialized!"),a.Container.get(o)}throw new Error("not found")}),r)}};r([p.Injector(l.BootstrapLogger),o("design:type","function"==typeof(e=void 0!==l.BootstrapLogger&&l.BootstrapLogger)&&e||Object)],d.prototype,"bootstrapLogger",void 0),r([p.Injector(n.CacheService),o("design:type","function"==typeof(t=void 0!==n.CacheService&&n.CacheService)&&t||Object)],d.prototype,"cacheService",void 0),d=r([a.Service()],d),exports.ResolverService=d;
},{"../../container":4,"../cache/cache-layer.service":162,"../../helpers/events":182,"../bootstrap-logger/bootstrap-logger":161,"../../decorators/injector/injector.decorator":152}],69:[function(require,module,exports) {
"use strict";function e(e){for(var r in e)exports.hasOwnProperty(r)||(exports[r]=e[r])}Object.defineProperty(exports,"__esModule",{value:!0}),e(require("./resolver.service"));
},{"./resolver.service":170}],32:[function(require,module,exports) {
"use strict";var e,t=this&&this.__decorate||function(e,t,i,r){var n,c=arguments.length,l=c<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,i,r);else for(var o=e.length-1;o>=0;o--)(n=e[o])&&(l=(c<3?n(l):c>3?n(t,i,l):n(t,i))||l);return c>3&&l&&Object.defineProperty(t,i,l),l},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(exports,"__esModule",{value:!0});const r=require("../plugin/plugin.service"),n=require("../../container");let c=class{constructor(e){this.pluginService=e}listPlugins(){return this.pluginService.getPlugins()}getPlugin(e){return this.pluginService.getPlugins().filter(t=>t.name===e.name)[0]}};c=t([n.Service(),i("design:paramtypes",["function"==typeof(e=void 0!==r.PluginService&&r.PluginService)&&e||Object])],c),exports.PluginManager=c;
},{"../plugin/plugin.service":31,"../../container":4}],33:[function(require,module,exports) {
"use strict";var e=this&&this.__decorate||function(e,t,r,c){var o,n=arguments.length,i=n<3?t:null===c?c=Object.getOwnPropertyDescriptor(t,r):c;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,c);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(n<3?o(i):n>3?o(t,r,i):o(t,r))||i);return n>3&&i&&Object.defineProperty(t,r,i),i};Object.defineProperty(exports,"__esModule",{value:!0});const t=require("../../container"),r=require("rxjs");let c=class{constructor(){this.appStarted=new r.Subject}};c=e([t.Service()],c),exports.AfterStarterService=c;
},{"../../container":4}],142:[function(require,module,exports) {
"use strict";var e,i,t,n,r,a,s,o,c,l,h,f,p=this&&this.__decorate||function(e,i,t,n){var r,a=arguments.length,s=a<3?i:null===n?n=Object.getOwnPropertyDescriptor(i,t):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,i,t,n);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(s=(a<3?r(s):a>3?r(i,t,s):r(i,t))||s);return a>3&&s&&Object.defineProperty(i,t,s),s},v=this&&this.__metadata||function(e,i){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,i)},g=this&&this.__awaiter||function(e,i,t,n){return new(t||(t=Promise))(function(r,a){function s(e){try{c(n.next(e))}catch(e){a(e)}}function o(e){try{c(n.throw(e))}catch(e){a(e)}}function c(e){e.done?r(e.value):new t(function(i){i(e.value)}).then(s,o)}c((n=n.apply(e,i||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0});const u=require("rxjs"),b=require("../../container"),y=require("../bootstrap-logger/bootstrap-logger"),d=require("../cache/cache-layer.service"),S=require("../../helpers/events"),m=require("../lazy-factory/lazy-factory.service"),C=require("../config/config.service"),O=require("../plugin/plugin.service"),L=require("rxjs/operators"),P=require("../effect/effect.service"),j=require("../controllers/controllers.service"),q=require("../components/components.service"),w=require("../bootstraps/bootstraps.service"),B=require("../services/services.service"),M=require("../plugin-manager/plugin-manager"),A=require("../after-starter/after-starter.service");let R=class{constructor(e,i,t,n,r,a,s,o,c,l,h,f){this.logger=e,this.cacheService=i,this.lazyFactoriesService=t,this.configService=n,this.controllersService=r,this.effectsService=a,this.pluginService=s,this.componentsService=o,this.bootstrapsService=c,this.servicesService=l,this.pluginManager=h,this.afterStarterService=f,this.chainableObservable=u.of(!0),this.asyncChainables=[this.chainableObservable],this.globalConfig=this.cacheService.createLayer({name:S.InternalLayers.globalConfig})}start(e,i){return this.configService.setConfig(i),this.globalConfig.putItem({key:S.InternalEvents.init,data:i}),b.Container.get(e),u.of(Array.from(this.lazyFactoriesService.lazyFactories.keys())).pipe(L.map(e=>e.map(e=>this.prepareAsyncChainables(e))),L.switchMap(e=>u.combineLatest(this.asyncChainables).pipe(L.take(1),L.map(i=>this.attachLazyLoadedChainables(e,i)),L.map(()=>this.validateSystem()),L.switchMap(()=>u.combineLatest(this.asyncChainableControllers())),L.switchMap(()=>u.combineLatest(this.asyncChainablePluginsBeforeRegister())),L.switchMap(()=>u.combineLatest(this.asyncChainablePluginsRegister())),L.switchMap(()=>u.combineLatest(this.asyncChainablePluginsAfterRegister())),L.switchMap(()=>u.combineLatest(this.asyncChainableServices())),L.switchMap(()=>u.combineLatest(this.asyncChainableEffects())),L.switchMap(()=>u.combineLatest(this.asyncChainableComponents())),L.map(()=>this.loadApplication()),L.switchMap(()=>u.combineLatest(this.asyncChainableBootstraps())),L.map(()=>this.final()))))}final(){return this.afterStarterService.appStarted.next(!0),this.pluginManager}asyncChainablePluginsRegister(){return[this.chainableObservable,...this.pluginService.getPlugins().filter(e=>this.configService.config.initOptions.plugins||e.metadata.options&&e.metadata.options.init||this.configService.config.init).map(e=>g(this,void 0,void 0,function*(){return this.registerPlugin(e)}))]}asyncChainableComponents(){return[this.chainableObservable,...this.componentsService.getComponents().filter(e=>this.configService.config.initOptions.components||e.metadata.options&&e.metadata.options.init||this.configService.config.init).map(e=>g(this,void 0,void 0,function*(){return yield b.Container.get(e)}))]}asyncChainableBootstraps(){return[this.chainableObservable,...this.bootstrapsService.getBootstraps().map(e=>g(this,void 0,void 0,function*(){return yield b.Container.get(e)}))]}asyncChainableEffects(){return[this.chainableObservable,...this.effectsService.getEffects().filter(e=>this.configService.config.initOptions.effects||e.metadata.options&&e.metadata.options.init||this.configService.config.init).map(e=>g(this,void 0,void 0,function*(){return yield b.Container.get(e)}))]}asyncChainableServices(){return[this.chainableObservable,...this.servicesService.getServices().filter(e=>this.configService.config.initOptions.services||e.metadata.options&&e.metadata.options.init||this.configService.config.init).map(e=>g(this,void 0,void 0,function*(){return yield b.Container.get(e)}))]}asyncChainableControllers(){return[this.chainableObservable,...this.controllersService.getControllers().filter(e=>this.configService.config.initOptions.controllers||e.metadata.options&&e.metadata.options.init||this.configService.config.init).map(e=>g(this,void 0,void 0,function*(){return yield b.Container.get(e)}))]}asyncChainablePluginsAfterRegister(){return[this.chainableObservable,...this.pluginService.getAfterPlugins().filter(e=>this.configService.config.initOptions.pluginsAfter||e.metadata.options&&e.metadata.options.init||this.configService.config.init).map(e=>g(this,void 0,void 0,function*(){return yield this.registerPlugin(e)}))]}asyncChainablePluginsBeforeRegister(){return[this.chainableObservable,...this.pluginService.getBeforePlugins().filter(e=>this.configService.config.initOptions.pluginsBefore||e.metadata.options&&e.metadata.options.init||this.configService.config.init).map(e=>g(this,void 0,void 0,function*(){return this.registerPlugin(e)}))]}registerPlugin(e){return g(this,void 0,void 0,function*(){const i=b.Container.get(e);return yield i.register(),i})}prepareAsyncChainables(e){this.logger.log(`Bootstrap -> @Service('${e.name||e}'): loading...`);const i=u.from(this.lazyFactoriesService.getLazyFactory(e));return this.asyncChainables.push(i),e}validateSystem(){this.cacheService.searchForDuplicateDependenciesInsideApp()}attachLazyLoadedChainables(e,i){i.splice(0,1);let t=0;return e.map(e=>b.Container.set(e,i[t++])),!0}loadApplication(){return this.logger.log("Bootstrap -> press start!"),Array.from(this.cacheService.getLayer(S.InternalLayers.modules).map.keys()).forEach(e=>this.cacheService.getLayer(e).putItem({key:S.InternalEvents.load,data:this.configService.config.init})),!0}};R=p([b.Service(),v("design:paramtypes",["function"==typeof(e=void 0!==y.BootstrapLogger&&y.BootstrapLogger)&&e||Object,"function"==typeof(i=void 0!==d.CacheService&&d.CacheService)&&i||Object,"function"==typeof(t=void 0!==m.LazyFactory&&m.LazyFactory)&&t||Object,"function"==typeof(n=void 0!==C.ConfigService&&C.ConfigService)&&n||Object,"function"==typeof(r=void 0!==j.ControllersService&&j.ControllersService)&&r||Object,"function"==typeof(a=void 0!==P.EffectsService&&P.EffectsService)&&a||Object,"function"==typeof(s=void 0!==O.PluginService&&O.PluginService)&&s||Object,"function"==typeof(o=void 0!==q.ComponentsService&&q.ComponentsService)&&o||Object,"function"==typeof(c=void 0!==w.BootstrapsServices&&w.BootstrapsServices)&&c||Object,"function"==typeof(l=void 0!==B.ServicesService&&B.ServicesService)&&l||Object,"function"==typeof(h=void 0!==M.PluginManager&&M.PluginManager)&&h||Object,"function"==typeof(f=void 0!==A.AfterStarterService&&A.AfterStarterService)&&f||Object])],R),exports.BootstrapService=R;
},{"../../container":4,"../bootstrap-logger/bootstrap-logger":161,"../cache/cache-layer.service":162,"../../helpers/events":182,"../lazy-factory/lazy-factory.service":183,"../config/config.service":168,"../plugin/plugin.service":31,"../effect/effect.service":176,"../controllers/controllers.service":175,"../components/components.service":177,"../bootstraps/bootstraps.service":172,"../services/services.service":178,"../plugin-manager/plugin-manager":32,"../after-starter/after-starter.service":33}],139:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../services/exit-handler/exit-handler.service"),i=require("../container");exports.exitHandlerInit=(()=>{const n=i.Container.get(e.ExitHandlerService);n.init(),process.on("exit",n.exitHandler.bind(n,{cleanup:!0})),process.on("SIGINT",n.exitHandler.bind(n,{exit:!0})),process.on("SIGUSR1",n.exitHandler.bind(n,{exit:!0})),process.on("SIGUSR2",n.exitHandler.bind(n,{exit:!0})),process.on("uncaughtException",n.exitHandler.bind(n,{exit:!0}))});
},{"../services/exit-handler/exit-handler.service":165,"../container":4}],19:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),require("reflect-metadata");const e=require("../container"),t=require("../services/bootstrap/bootstrap.service"),r=require("./exit-handler");r.exitHandlerInit();const o=e.Container.get(t.BootstrapService);exports.Bootstrap=((e,t)=>o.start(e,t)),exports.BootstrapPromisify=((e,t)=>o.start(e,t).toPromise()),exports.BootstrapFramework=((t,r,s)=>(o.configService.setConfig(s),r.map(t=>e.Container.get(t)),o.start(t,s)));
},{"../container":4,"../services/bootstrap/bootstrap.service":142,"./exit-handler":139}],6:[function(require,module,exports) {
"use strict";function e(e){for(var r in e)exports.hasOwnProperty(r)||(exports[r]=e[r])}Object.defineProperty(exports,"__esModule",{value:!0}),e(require("./bootstrap")),e(require("./create-unique-hash")),e(require("./generic-constructor"));
},{"./bootstrap":19,"./create-unique-hash":20,"./generic-constructor":21}],171:[function(require,module,exports) {
"use strict";var e=this&&this.__decorate||function(e,t,r,a){var n,i=arguments.length,o=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,a);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(i<3?n(o):i>3?n(t,r,o):n(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o};Object.defineProperty(exports,"__esModule",{value:!0});const t=require("../../container"),r=require("../../helpers");let a=class{generateHashData(e,t){const r=e.services||[],a=e.imports||[],n=r=>r&&r.provide?r.provide:r?(this.validateCustomInjectable(r,e,t),{moduleName:r.metadata.moduleName,hash:r.metadata.moduleHash}):void 0;return[[...r.map(e=>n(e))],[...a.map(e=>n(e))]]}validateCustomInjectableKeys(e){}validateCustomInjectable(e,t,r){if(!e.metadata&&!e.provide)throw new Error(`\n                ---- Wrong service ${JSON.stringify(e)} provided inside '${r.name}' ----\n                @Module({\n                    services: ${JSON.stringify([...t.services.filter(e=>!e.metadata),...t.services.filter(e=>e&&e.metadata&&e.metadata.moduleName).map(e=>e.metadata.moduleName)])}\n                })\n                ${JSON.stringify(`${r}`,null,2)}\n\n                Hint: System recieved Object but it is not with appropriate format you must provide object with following parameters:\n\n                YourObject: ${JSON.stringify(e)}\n\n                Option 1. [YourClass]\n\n                Option 2. [{provide: 'your-value', useClass: YourClass}]\n\n                Option 3. [{provide: 'your-value', deps: [YourClass], useFactory: (test: YourClass) => {}}]\n\n                Option 4. [{provide: 'your-value', useDynamic: {}}]\n\n                Option 5. [{provide: 'your-value', useValue: 'your-value'}]\n            `)}parseModuleTemplate(e,t,r){return`\n            ---- @gapi module '${e}' metadata----\n            @Module({\n                imports: ${JSON.stringify(t[1],null,"\t")},\n                services: ${JSON.stringify(t[0],null,"\t")}\n            })\n            ${JSON.stringify(r,null,2)}\n        `}createUniqueHash(e){return r.createUniqueHash(e)}};a=e([t.Service()],a),exports.MetadataService=a;
},{"../../container":4,"../../helpers":6}],73:[function(require,module,exports) {
"use strict";function e(e){for(var r in e)exports.hasOwnProperty(r)||(exports[r]=e[r])}Object.defineProperty(exports,"__esModule",{value:!0}),e(require("./metadata.service"));
},{"./metadata.service":171}],72:[function(require,module,exports) {
"use strict";function e(e){for(var r in e)exports.hasOwnProperty(r)||(exports[r]=e[r])}Object.defineProperty(exports,"__esModule",{value:!0}),e(require("./compression.service"));
},{"./compression.service":174}],78:[function(require,module,exports) {
"use strict";function e(e){for(var r in e)exports.hasOwnProperty(r)||(exports[r]=e[r])}Object.defineProperty(exports,"__esModule",{value:!0}),e(require("./effect.service"));
},{"./effect.service":176}],76:[function(require,module,exports) {
"use strict";function e(e){for(var r in e)exports.hasOwnProperty(r)||(exports[r]=e[r])}Object.defineProperty(exports,"__esModule",{value:!0}),e(require("./controllers.service"));
},{"./controllers.service":175}],77:[function(require,module,exports) {
"use strict";function e(e){for(var r in e)exports.hasOwnProperty(r)||(exports[r]=e[r])}Object.defineProperty(exports,"__esModule",{value:!0}),e(require("./components.service"));
},{"./components.service":177}],75:[function(require,module,exports) {
"use strict";function e(e){for(var r in e)exports.hasOwnProperty(r)||(exports[r]=e[r])}Object.defineProperty(exports,"__esModule",{value:!0}),e(require("./bootstraps.service"));
},{"./bootstraps.service":172}],79:[function(require,module,exports) {
"use strict";function e(e){for(var r in e)exports.hasOwnProperty(r)||(exports[r]=e[r])}Object.defineProperty(exports,"__esModule",{value:!0}),e(require("./services.service"));
},{"./services.service":178}],7:[function(require,module,exports) {
"use strict";function e(e){for(var r in e)exports.hasOwnProperty(r)||(exports[r]=e[r])}Object.defineProperty(exports,"__esModule",{value:!0}),e(require("./cache")),e(require("./plugin/plugin.service")),e(require("./bootstrap-logger")),e(require("./exit-handler")),e(require("./external-importer")),e(require("./module")),e(require("./resolver")),e(require("./config")),e(require("./metadata")),e(require("./compression")),e(require("./file")),e(require("./constructor-watcher")),e(require("./effect")),e(require("./controllers")),e(require("./components")),e(require("./bootstraps")),e(require("./services")),e(require("./plugin-manager/plugin-manager")),e(require("./after-starter/after-starter.service"));
},{"./cache":65,"./plugin/plugin.service":31,"./bootstrap-logger":64,"./exit-handler":66,"./external-importer":67,"./module":68,"./resolver":69,"./config":70,"./metadata":73,"./compression":72,"./file":71,"./constructor-watcher":74,"./effect":78,"./controllers":76,"./components":77,"./bootstraps":75,"./services":79,"./plugin-manager/plugin-manager":32,"./after-starter/after-starter.service":33}],21:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../container"),s=require("../services"),t=e.Container.get(s.ModuleService),o=e.Container.get(s.BootstrapLogger);function r(e,s,r){return function(n,i){return e?(e.imports&&t.setImports(e.imports,s),e.services&&t.setServices(e.services,s,r),e.controllers&&t.setControllers(e.controllers,s,r),e.effects&&t.setEffects(e.effects,s,r),e.components&&t.setComponents(e.components,s,r),e.beforePlugins&&t.setBeforePlugins(e.beforePlugins,s,r),e.plugins&&t.setPlugins(e.plugins,s,r),e.afterPlugins&&t.setAfterPlugins(e.afterPlugins,s,r),e.bootstrap&&t.setBootstraps(e.bootstrap,s,r),o.log(`Bootstrap -> @Module('${n.originalName}')${o.logHashes(`(${n.name})`)}: finished!`),new n):new n}}exports.GenericConstruct=r;
},{"../container":4,"../services":7}],155:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../../container"),r=require("../../services/cache/cache-layer.service"),o=require("../../helpers/generic-constructor"),t=require("../../services/bootstrap-logger/bootstrap-logger"),s=require("../../services/resolver/resolver.service"),n=require("../../services/metadata/metadata.service"),a=require("../../services/module/module.service"),i=e.Container.get(t.BootstrapLogger),c=e.Container.get(s.ResolverService),l=e.Container.get(r.CacheService),u=e.Container.get(n.MetadataService),g=e.Container.get(a.ModuleService);function m(r){return t=>{r=r||{};const s=Object.assign(t),n=t.name||t.constructor.name,a=u.generateHashData(r,s),m=u.parseModuleTemplate(n,a,`${t}`),f=u.createUniqueHash(m);Object.defineProperty(s,"originalName",{value:s.name||s.constructor.name,writable:!1}),Object.defineProperty(s,"name",{value:f,writable:!0});const d=l.createLayer({name:f});s.metadata={moduleName:s.originalName,moduleHash:f,options:null,type:"module",raw:m};const p=function(...e){return i.log(`Bootstrap -> @Module('${s.originalName}')${i.logHashes(`(${s.name})`)}: loading...`),o.GenericConstruct(r,s,d)(s,e)};if(Object.assign(p,s),c.resolveDependencies(f,s,n).subscribe(()=>i.log(`Start -> @Module('${s.originalName}')${i.logHashes(`(${s.name})`)}: loaded!`)),s.forRoot){const e=p.forRoot=s.forRoot;p.forRoot=function(r){const o=e(r);if(!o)throw new Error(`forRoot configuration inside ${p.name} is returning undefined or null`);return o.frameworkImports&&g.setImports(o.frameworkImports,s),o.services&&g.setServices(o.services,s,d),o.components&&g.setComponents(o.components,s,d),o.effects&&g.setEffects(o.effects,s,d),o.controllers&&g.setControllers(o.controllers,s,d),o.beforePlugins&&g.setBeforePlugins(o.beforePlugins,s,d),o.plugins&&g.setPlugins(o.plugins,s,d),o.afterPlugins&&g.setAfterPlugins(o.afterPlugins,s,d),o.module?o.module:o}}const v={type:p};return e.Container.set(v),p}}exports.Module=m;
},{"../../container":4,"../../services/cache/cache-layer.service":162,"../../helpers/generic-constructor":21,"../../services/bootstrap-logger/bootstrap-logger":161,"../../services/resolver/resolver.service":170,"../../services/metadata/metadata.service":171,"../../services/module/module.service":166}],61:[function(require,module,exports) {
"use strict";function e(e){for(var r in e)exports.hasOwnProperty(r)||(exports[r]=e[r])}Object.defineProperty(exports,"__esModule",{value:!0}),e(require("./module.decorator")),e(require("./module.interfaces"));
},{"./module.decorator":155,"./module.interfaces":26}],59:[function(require,module,exports) {
"use strict";function e(e){for(var r in e)exports.hasOwnProperty(r)||(exports[r]=e[r])}Object.defineProperty(exports,"__esModule",{value:!0}),e(require("./injector.decorator"));
},{"./injector.decorator":152}],153:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../../container"),r=require("../../services/module/module.service");function t(t){return e.Container.get(r.ModuleService).watcherService.getByClass(t)}exports.InjectSoft=t;
},{"../../container":4,"../../services/module/module.service":166}],58:[function(require,module,exports) {
"use strict";function e(e){for(var r in e)exports.hasOwnProperty(r)||(exports[r]=e[r])}Object.defineProperty(exports,"__esModule",{value:!0}),e(require("./inject-soft.decorator"));
},{"./inject-soft.decorator":153}],154:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../../helpers/create-unique-hash"),n=require("../../container/Container");function r(r){return function(t){const a=e.createUniqueHash(`${t}`);Object.defineProperty(t,"originalName",{value:t.name||t.constructor.name,writable:!1}),Object.defineProperty(t,"name",{value:a,writable:!0}),t.metadata={moduleName:t.originalName,moduleHash:a,type:"controller",options:r||null,raw:`\n            ---- @Service '${t.name}' metadata----\n            @Service()\n            ${t.originalName}\n            `};const o={type:t};n.Container.set(o)}}exports.Controller=r;
},{"../../helpers/create-unique-hash":20,"../../container/Container":16}],60:[function(require,module,exports) {
"use strict";function e(e){for(var r in e)exports.hasOwnProperty(r)||(exports[r]=e[r])}Object.defineProperty(exports,"__esModule",{value:!0}),e(require("./controller.decorator"));
},{"./controller.decorator":154}],157:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../../helpers/create-unique-hash"),t=require("../../container/Container");function n(n){return function(a){const r=e.createUniqueHash(`${a}`);Object.defineProperty(a,"originalName",{value:a.name||a.constructor.name,writable:!1}),Object.defineProperty(a,"name",{value:r,writable:!0}),a.metadata={moduleName:a.originalName,moduleHash:r,type:"effect",options:n||null,raw:`\n            ---- @Effect '${a.name}' metadata----\n            @Effect()\n            ${a.originalName}\n            `};const o={type:a};t.Container.set(o)}}exports.Effect=n;
},{"../../helpers/create-unique-hash":20,"../../container/Container":16}],63:[function(require,module,exports) {
"use strict";function e(e){for(var r in e)exports.hasOwnProperty(r)||(exports[r]=e[r])}Object.defineProperty(exports,"__esModule",{value:!0}),e(require("./effect.decorator"));
},{"./effect.decorator":157}],158:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../../helpers/create-unique-hash"),n=require("../../container/Container");function t(t){return function(a){const o=e.createUniqueHash(`${a}`);Object.defineProperty(a,"originalName",{value:a.name||a.constructor.name,writable:!1}),Object.defineProperty(a,"name",{value:o,writable:!0}),a.metadata={moduleName:a.originalName,moduleHash:o,options:t||null,type:"component",raw:`\n            ---- @Component '${a.name}' metadata----\n            @Component()\n            ${a.originalName}\n            `};const r={type:a};n.Container.set(r)}}exports.Component=t;
},{"../../helpers/create-unique-hash":20,"../../container/Container":16}],62:[function(require,module,exports) {
"use strict";function e(e){for(var r in e)exports.hasOwnProperty(r)||(exports[r]=e[r])}Object.defineProperty(exports,"__esModule",{value:!0}),e(require("./component.decorator"));
},{"./component.decorator":158}],5:[function(require,module,exports) {
"use strict";function e(e){for(var r in e)exports.hasOwnProperty(r)||(exports[r]=e[r])}Object.defineProperty(exports,"__esModule",{value:!0}),e(require("./module")),e(require("./injector")),e(require("./inject-soft")),e(require("./controller")),e(require("./effect")),e(require("./component"));
},{"./module":61,"./injector":59,"./inject-soft":58,"./controller":60,"./effect":63,"./component":62}],1:[function(require,module,exports) {
"use strict";function e(e){for(var r in e)exports.hasOwnProperty(r)||(exports[r]=e[r])}Object.defineProperty(exports,"__esModule",{value:!0}),e(require("./container")),e(require("./decorators")),e(require("./helpers")),e(require("./services"));
},{"./container":4,"./decorators":5,"./helpers":6,"./services":7}]},{},[1], null)
//# sourceMappingURL=/index.map