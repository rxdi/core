parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"5ixs":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});class t{hash(t,e){const r=Object.assign({msgFormat:"string",outFormat:"hex"},e);switch(t=u(t),r.msgFormat){default:case"string":t=u(t);break;case"hex-bytes":t=function(t){const e=t.replace(" ","");return""==e?"":e.match(/.{2}/g).map(t=>String.fromCharCode(parseInt(t,16))).join("")}(t)}const n=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],o=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],s=(t+=String.fromCharCode(128)).length/4+2,h=Math.ceil(s/16),a=new Array(h);for(let l=0;l<h;l++){a[l]=new Array(16);for(let e=0;e<16;e++)a[l][e]=t.charCodeAt(64*l+4*e+0)<<24|t.charCodeAt(64*l+4*e+1)<<16|t.charCodeAt(64*l+4*e+2)<<8|t.charCodeAt(64*l+4*e+3)<<0}const i=8*(t.length-1)/Math.pow(2,32),c=8*(t.length-1)>>>0;a[h-1][14]=Math.floor(i),a[h-1][15]=c;for(let l=0;l<h;l++){const t=new Array(64);for(let n=0;n<16;n++)t[n]=a[l][n];for(let n=16;n<64;n++)t[n]=this.σ1(t[n-2])+t[n-7]+this.σ0(t[n-15])+t[n-16]>>>0;let e=o[0],r=o[1],s=o[2],h=o[3],i=o[4],c=o[5],R=o[6],u=o[7];for(let o=0;o<64;o++){const a=u+this.Σ1(i)+this.Ch(i,c,R)+n[o]+t[o],l=this.Σ0(e)+this.Maj(e,r,s);u=R,R=c,c=i,i=h+a>>>0,h=s,s=r,r=e,e=a+l>>>0}o[0]=o[0]+e>>>0,o[1]=o[1]+r>>>0,o[2]=o[2]+s>>>0,o[3]=o[3]+h>>>0,o[4]=o[4]+i>>>0,o[5]=o[5]+c>>>0,o[6]=o[6]+R>>>0,o[7]=o[7]+u>>>0}for(let l=0;l<o.length;l++)o[l]=("00000000"+o[l].toString(16)).slice(-8);const R="hex-w"==r.outFormat?" ":"";return o.join(R);function u(t){try{return(new TextEncoder).encode(t).reduce((t,e)=>t+String.fromCharCode(e),"")}catch(e){return unescape(encodeURIComponent(t))}}}ROTR(t,e){return e>>>t|e<<32-t}"Σ0"(t){return this.ROTR(2,t)^this.ROTR(13,t)^this.ROTR(22,t)}"Σ1"(t){return this.ROTR(6,t)^this.ROTR(11,t)^this.ROTR(25,t)}"σ0"(t){return this.ROTR(7,t)^this.ROTR(18,t)^t>>>3}"σ1"(t){return this.ROTR(17,t)^this.ROTR(19,t)^t>>>10}Ch(t,e,r){return t&e^~t&r}Maj(t,e,r){return t&e^t&r^e&r}}exports.Sha256=t,exports.sha256=new t;
},{}],"7yeE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("./sha256");function r(r){return e.sha256.hash(r)}exports.createUniqueHash=r;
},{"./sha256":"5ixs"}],"cUJz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});class e extends Error{constructor(r){super(`Cannot determine a class of the requesting service '${JSON.stringify(r)}'`),this.name="ServiceNotFoundError",Object.setPrototypeOf(this,e.prototype)}}exports.MissingProvidedServiceTypeError=e;
},{}],"APeJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});class e{constructor(e){this.name=e}}exports.Token=e;class s extends e{}exports.InjectionToken=s;
},{}],"FyDv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../Token");class t extends Error{constructor(i){super(),this.name="ServiceNotFoundError","string"==typeof i?this.message=`Service '${i}' was not found, looks like it was not registered in the container. `+`Register it by calling Container.set('${JSON.stringify(i)}', ...) before using service.`:i instanceof e.Token&&i.name?this.message=`Service '${i.name}' was not found, looks like it was not registered in the container. `+"Register it by calling Container.set before using service.":i instanceof e.Token&&(this.message="Service with a given token was not found, looks like it was not registered in the container. Register it by calling Container.set before using service."),Object.setPrototypeOf(this,t.prototype)}}exports.ServiceNotFoundError=t;
},{"../Token":"APeJ"}],"/Yna":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});class t{constructor(){this._constructors=new Map}getConstructor(t){return this._constructors.get(t)}getByClass(t){return this._constructors.get(t.name).value}createConstructor(t,r){return this._constructors.has(t)?this.getConstructor(t):(this._constructors.set(t,r),this.getConstructor(t))}triggerOnInit(t){const r=this._constructors.get(t.name);r.value&&r.value.OnInit&&r.value.OnInit.bind(r.value)()}}exports.ConstructorWatcherService=t,exports.constructorWatcherService=new t;
},{}],"aTjn":[function(require,module,exports) {
"use strict";function e(e){for(var r in e)exports.hasOwnProperty(r)||(exports[r]=e[r])}Object.defineProperty(exports,"__esModule",{value:!0}),e(require("./constructor-watcher"));
},{"./constructor-watcher":"/Yna"}],"EKoD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("./Container"),t=require("./error/MissingProvidedServiceTypeError"),r=require("./error/ServiceNotFoundError"),i=require("./Token"),n=require("../services/constructor-watcher");class s{constructor(e){this.services=new Map,this.id=e}has(e){return!!this.findService(e)}get(t){const r=e.Container.of(void 0),i=r.findService(t),n=this.findService(t);if(i&&!0===i.global)return this.getServiceValue(t,i);if(n)return this.getServiceValue(t,n);if(i&&this!==r){const e=Object.assign({},i);e.value=void 0;const r=this.getServiceValue(t,e);return this.set(t,r),r}return this.getServiceValue(t,i)}getMany(e){return this.filterServices(e).map(t=>this.getServiceValue(e,t))}set(e,t){if(e instanceof Array)return e.forEach(e=>this.set(e)),this;if("string"==typeof e||e instanceof i.Token)return this.set({id:e,value:t});if("object"==typeof e&&e.service)return this.set({id:e.service,value:t});if(e instanceof Function)return this.set({type:e,id:e,value:t});const r=e,n=this.services.get(r);return n&&!0!==n.multiple?Object.assign(n,r):this.services.set(r,r),this}remove(...e){return e.forEach(e=>{this.filterServices(e).forEach(e=>{this.services.delete(e)})}),this}reset(){return this.services.clear(),this}filterServices(e){return Array.from(this.services.values()).filter(t=>t.id?t.id===e:!!(t.type&&e instanceof Function)&&(t.type===e||e.prototype instanceof t.type))}findService(e){return Array.from(this.services.values()).find(t=>t.id?e instanceof Object&&t.id instanceof i.Token&&e.service instanceof i.Token?t.id===e.service:t.id===e:!!(t.type&&e instanceof Function)&&t.type===e)}getServiceValue(e,s){if(s&&void 0!==s.value)return s.value;if(!(s&&s.type||s&&s.factory||!("string"==typeof e||e instanceof i.Token)))throw new r.ServiceNotFoundError(e);let o=void 0;if(s&&s.type?o=s.type:s&&s.id instanceof Function?o=s.id:e instanceof Function&&(o=e),!s){if(!o)throw new t.MissingProvidedServiceTypeError(e);s={type:o},this.services.set(s,s)}const c=o&&Reflect&&Reflect.getMetadata?Reflect.getMetadata("design:paramtypes",o):void 0;let a,u=c?this.initializeParams(o,c):[];if(s.factory)u=u.filter(e=>void 0!==e),a=s.factory instanceof Array?this.get(s.factory[0])[s.factory[1]](...u):s.factory(...u,this);else{if(!o)throw new t.MissingProvidedServiceTypeError(e);u.unshift(null),u.push(this),o.prototype.OnBefore&&o.prototype.OnBefore.bind(o)(),a=new(o.bind.apply(o,u)),n.constructorWatcherService.createConstructor(o.name,{type:o,value:a}),a.OnInit&&a.OnInit.bind(a)()}return s&&!s.transient&&a&&(s.value=a),o&&this.applyPropertyHandlers(o,a),a}initializeParams(t,r){return r.map((r,i)=>{const n=Array.from(e.Container.handlers.values()).find(e=>e.object===t&&e.index===i);return n?n.value(this):r&&r.name&&!this.isTypePrimitive(r.name)?this.get(r):void 0})}isTypePrimitive(e){return-1!==["string","boolean","number","object"].indexOf(e.toLowerCase())}applyPropertyHandlers(t,r){e.Container.handlers.forEach(e=>{"number"!=typeof e.index&&(e.object.constructor===t||t.prototype instanceof e.object.constructor)&&(r[e.propertyName]=e.value(this))})}}exports.ContainerInstance=s;
},{"./Container":"SgUW","./error/MissingProvidedServiceTypeError":"cUJz","./error/ServiceNotFoundError":"FyDv","./Token":"APeJ","../services/constructor-watcher":"aTjn"}],"SgUW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const t=require("./ContainerInstance");class e{static of(e){if(void 0===e)return this.globalInstance;let s=this.instances.get(e);return s||(s=new t.ContainerInstance(e),this.instances.set(e,s)),s}static has(t){return this.globalInstance.has(t)}static get(t){return this.globalInstance.get(t)}static getMany(t){return this.globalInstance.getMany(t)}static set(t,e){return this.globalInstance.set(t,e),this}static remove(...t){return this.globalInstance.remove(...t),this}static reset(t){if(t){const e=this.instances.get(t);e&&(e.reset(),this.instances.delete(t))}else this.globalInstance.reset(),Array.from(this.instances.values()).forEach(t=>t.reset());return this}static registerHandler(t){return this.handlers.set(t,t),this}static import(t){return this}}e.globalInstance=new t.ContainerInstance(void 0),e.instances=new Map,e.handlers=new Map,exports.Container=e;
},{"./ContainerInstance":"EKoD"}],"+3J1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("./create-unique-hash"),t=require("../container/Container"),n=require("../container/Token");function a(a,r){return i=>{const o=e.createUniqueHash(`${i}${JSON.stringify(a,null,4)}`);Object.defineProperty(i,"originalName",{value:i.name||i.constructor.name,writable:!1}),Object.defineProperty(i,"name",{value:o,writable:!0});const l=e=>e.charAt(0).toUpperCase()+e.slice(1);i.metadata={moduleName:i.originalName,moduleHash:o,options:a||null,type:r.type,raw:`\n        ---- @${l(r.type)} '${i.name}' metadata----\n        @${l(r.type)}(${JSON.stringify(a,null,4)})\n        ${i.originalName}\n        `};const s={type:i};"string"==typeof a||a instanceof n.Token?(s.id=a,s.multiple=a.multiple,s.global=a.global||!1,s.transient=a.transient):a&&(s.id=a.id,s.factory=a.factory,s.multiple=a.multiple,s.global=a.global||!1,s.transient=a.transient),t.Container.set(s)}}exports.ReflectDecorator=a;
},{"./create-unique-hash":"7yeE","../container/Container":"SgUW","../container/Token":"APeJ"}],"77za":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../../helpers/reflect.decorator");function r(r){return e.ReflectDecorator(r,{type:"service"})}exports.Service=r;
},{"../../helpers/reflect.decorator":"+3J1"}],"gqme":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});
},{}],"a9b9":[function(require,module,exports) {
"use strict";function e(e){for(var r in e)exports.hasOwnProperty(r)||(exports[r]=e[r])}Object.defineProperty(exports,"__esModule",{value:!0}),e(require("./on-before")),e(require("./on-init"));
},{"./on-before":"gqme","./on-init":"gqme"}],"xCzv":[function(require,module,exports) {
"use strict";function e(e){for(var r in e)exports.hasOwnProperty(r)||(exports[r]=e[r])}Object.defineProperty(exports,"__esModule",{value:!0});var r=require("../decorators/service/Service");exports.Injectable=r.Service;var t=require("./Container");exports.Container=t.Container;var i=require("./ContainerInstance");exports.ContainerInstance=i.ContainerInstance;var n=require("./types/Handler");exports.Handler=n.Handler;var a=require("./types/ServiceOptions");exports.ServiceOptions=a.ServiceOptions;var o=require("./types/ServiceIdentifier");exports.ServiceIdentifier=o.ServiceIdentifier;var s=require("./types/ServiceMetadata");exports.ServiceMetadata=s.ServiceMetadata;var p=require("./types/ObjectType");exports.ObjectType=p.ObjectType;var c=require("./Token");exports.InjectionToken=c.Token,e(require("./types/hooks/index"));
},{"../decorators/service/Service":"77za","./Container":"SgUW","./ContainerInstance":"EKoD","./types/Handler":"gqme","./types/ServiceOptions":"gqme","./types/ServiceIdentifier":"gqme","./types/ServiceMetadata":"gqme","./types/ObjectType":"gqme","./Token":"APeJ","./types/hooks/index":"a9b9"}],"z+ND":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("rxjs"),t=require("rxjs/operators");class i{constructor(t){this.items=new e.BehaviorSubject([]),this.map=new Map,this.name=t.name,this.config=t.config,this.initHook(t)}get(e){return this.map.get(e)}initHook(e){this.config.maxAge&&this.onExpireAll(e)}onExpireAll(e){e.items.forEach(e=>this.onExpire(e.key))}putItemHook(e){this.config.maxAge&&this.onExpire(e.key)}getItem(e){return this.map.has(e)?this.get(e):null}putItem(e){this.map.set(e.key,e);const t=this.get(e.key),i=this.items.getValue().filter(t=>t.key!==e.key);return this.items.next([...i,t]),this.putItemHook(e),e}onExpire(i){return new e.Observable(e=>e.next()).pipe(t.timeoutWith(this.config.maxAge,e.of(1)),t.skip(1),t.take(1)).subscribe(()=>this.removeItem(i))}removeItem(e){const t=this.items.getValue().filter(t=>t.key!==e);this.map.delete(e),this.items.next(t)}getItemObservable(e){return this.items.asObservable().pipe(t.filter(()=>!!this.map.has(e)),t.map(()=>this.map.get(e)))}flushCache(){return this.items.asObservable().pipe(t.map(e=>(e.forEach(e=>this.removeItem(e.key)),!0)))}}exports.CacheLayer=i;
},{}],"7pWv":[function(require,module,exports) {
"use strict";function e(e){return e.reduce((e,t)=>(e[t]=t,e),Object.create(null))}Object.defineProperty(exports,"__esModule",{value:!0}),exports.InternalEvents=e(["load","config"]),exports.InternalLayers=e(["globalConfig","modules"]);
},{}],"RWIc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});class e{constructor(){this.logging="true"===process.env.LOGGING,this.hashes=!0,this.date=!0,this.exitHandler=!0,this.fileService=!0}}exports.LoggerConfig=e;class s{}exports.PrivateCryptoModel=s;class t{}exports.ExperimentalFeatures=t;class i{}exports.InitOptionsConfig=i;class o{constructor(){this.init=!0,this.initOptions=new i,this.experimental=new t,this.logger=new e}}exports.ConfigModel=o;
},{}],"xj6s":[function(require,module,exports) {
"use strict";var e=this&&this.__decorate||function(e,t,r,o){var c,i=arguments.length,n=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,o);else for(var s=e.length-1;s>=0;s--)(c=e[s])&&(n=(i<3?c(n):i>3?c(t,r,n):c(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n};Object.defineProperty(exports,"__esModule",{value:!0});const t=require("../../decorators/service/Service"),r=require("./config.model");let o=class{constructor(){this.config=new r.ConfigModel}setConfig(e){Object.assign(this.config,e)}};o=e([t.Service()],o),exports.ConfigService=o;
},{"../../decorators/service/Service":"77za","./config.model":"RWIc"}],"BVuM":[function(require,module,exports) {
"use strict";function e(e){for(var r in e)exports.hasOwnProperty(r)||(exports[r]=e[r])}Object.defineProperty(exports,"__esModule",{value:!0}),e(require("./config.model")),e(require("./config.service"));
},{"./config.model":"RWIc","./config.service":"xj6s"}],"eCMG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../../container");function t(t){return function(r,n){Object.defineProperty(r,n,{get:()=>e.Container.get(t)})}}exports.Injector=t;
},{"../../container":"xCzv"}],"nFUx":[function(require,module,exports) {
"use strict";var e,o=this&&this.__decorate||function(e,o,t,r){var i,c=arguments.length,n=c<3?o:null===r?r=Object.getOwnPropertyDescriptor(o,t):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,o,t,r);else for(var g=e.length-1;g>=0;g--)(i=e[g])&&(n=(c<3?i(n):c>3?i(o,t,n):i(o,t))||n);return c>3&&n&&Object.defineProperty(o,t,n),n},t=this&&this.__metadata||function(e,o){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,o)};Object.defineProperty(exports,"__esModule",{value:!0});const r=require("../../decorators/service/Service"),i=require("../config/index"),c=require("../../decorators/injector/injector.decorator");let n=class{log(e){if(this.configService.config.logger.logging){const o=[this.logDate(),e];return console.log(...o),o}}error(e){console.error(e)}logImporter(e){if(this.configService.config.logger.logging)return this.log(e)}logDate(){return this.configService.config.logger.date?`${Date.now().toPrecision()}`:""}logFileService(e){if(this.configService.config.logger.fileService)return this.log(e),"``"}logHashes(e){return this.configService.config.logger.hashes?e:""}logExitHandler(e){if(!this.configService.config.logger.exitHandler)return"";this.log(e)}};o([c.Injector(i.ConfigService),t("design:type","function"==typeof(e=void 0!==i.ConfigService&&i.ConfigService)?e:Object)],n.prototype,"configService",void 0),n=o([r.Service()],n),exports.BootstrapLogger=n;
},{"../../decorators/service/Service":"77za","../config/index":"BVuM","../../decorators/injector/injector.decorator":"eCMG"}],"h/Q7":[function(require,module,exports) {
"use strict";function e(e){for(var r in e)exports.hasOwnProperty(r)||(exports[r]=e[r])}Object.defineProperty(exports,"__esModule",{value:!0}),e(require("./bootstrap-logger"));
},{"./bootstrap-logger":"nFUx"}],"0BAH":[function(require,module,exports) {
"use strict";var e,t,a=this&&this.__decorate||function(e,t,a,r){var s,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,a):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,a,r);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(i=(n<3?s(i):n>3?s(t,a,i):s(t,a))||i);return n>3&&i&&Object.defineProperty(t,a,i),i},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(exports,"__esModule",{value:!0});const s=require("rxjs"),n=require("rxjs/operators"),i=require("./cache-layer"),o=require("../../helpers/events"),c=require("../../decorators/service/Service"),m=require("../bootstrap-logger/index"),h={TRY_TO_UNSUBSCRIBE:"Someone try to unsubscribe from collection directly... agghhh.. read docs! Blame: "};let l=e=class{constructor(e){this.logger=e,this._cachedLayers=new s.BehaviorSubject([]),this.map=new Map,this.config={}}static createCacheInstance(e){return new i.CacheLayer(e)}getLayer(e){return this.map.has(e)?this.map.get(e):this.createLayer({name:e})}getLayersByName(e){return Array.from(this.map.keys()).map(t=>{if(t!==o.InternalLayers.modules&&t!==o.InternalLayers.globalConfig){const a=this.getLayer(t).getItem(o.InternalEvents.config);if(a&&a.data&&e===a.data.moduleName)return this.getLayer(a.data.moduleHash)}}).filter(e=>!!e)}searchForDuplicateDependenciesInsideApp(){const e=[].concat.apply([],Array.from(this.map.keys()).map(e=>Array.from(this.getLayer(e).map.keys()).map(e=>this.isExcludedEvent(e)?null:e).filter(e=>!!e))).map(e=>Object.create({count:1,name:e})).reduce((e,t)=>(e[t.name]=(e[t.name]||0)+t.count,e),{}),t=Object.keys(e).filter(t=>e[t]>1);if(t.length){const e=this.searchForDuplicatesByHash(t[0]),a=e[0].class.metadata.type.charAt(0).toUpperCase()+e[0].class.metadata.type.slice(1);throw new Error(`\n                ${e[0].class.metadata.raw}\n                ${a}: '${e[0].originalName}' found multiple times!\n                ${a} hash: ${e[0].moduleHash}\n                Modules: [${e[0].moduleName}, ${e[1].moduleName}]\n\n                Hint: '${e[0].originalName}' class identity hash is identical in both\n                imported files inside ${e[0].moduleName} and ${e[1].moduleName}\n                consider removing one of the '${e[0].originalName}'\n            `)}return t}isExcludedEvent(e){return e===o.InternalEvents.config||e===o.InternalEvents.load}searchForItem(e){return Array.from(this.map.keys()).map(t=>{const a=this.getLayer(t),r=Array.from(a.map.keys()).filter(t=>this.isExcludedEvent(t)?void 0:t===e.name);if(r.length)return a.getItem(r[0]).data}).filter(e=>!!e)[0]}searchForDuplicatesByHash(e){return Array.from(this.map.keys()).map(t=>{const a=this.getLayer(t),r=Array.from(a.map.keys()).filter(t=>{if(!this.isExcludedEvent(t))return t===e});if(r.length){const e=a.getItem(r[0]),s=this.getLayer(t).getItem(o.InternalEvents.config);return{moduleName:s.data.moduleName,moduleHash:s.data.moduleHash,originalName:e.data.originalName,dupeName:e.key,raw:s.data.raw,class:e.data}}}).filter(e=>!!e)}createLayer(t){if(this.map.has(t.name))return this.map.get(t.name);t.items=t.items||[],t.config=t.config||this.config;const a=e.createCacheInstance(t);return this.map.set(a.name,a),this._cachedLayers.next([...this._cachedLayers.getValue(),a]),this.LayerHook(a),a}LayerHook(e){this.protectLayerFromInvaders(e),(e.config.cacheFlushInterval||this.config.cacheFlushInterval)&&this.OnExpire(e)}protectLayerFromInvaders(e){e.items.constructor.prototype.unsubsribeFromLayer=e.items.constructor.prototype.unsubscribe,e.items.constructor.prototype.unsubscribe=(()=>{console.error(h.TRY_TO_UNSUBSCRIBE+e.name)})}OnExpire(e){return new s.Observable(e=>e.next()).pipe(n.timeoutWith(e.config.cacheFlushInterval||this.config.cacheFlushInterval,s.of(1)),n.skip(1),n.take(1)).subscribe(()=>this.removeLayer(e))}removeLayer(e){this.map.delete(e.name),this._cachedLayers.next([...this._cachedLayers.getValue().filter(t=>t.name!==e.name)])}transferItems(e,t){const a=this.getLayer(e),r=[];return t.forEach(e=>{const t=this.createLayer(e);a.items.getValue().forEach(e=>t.putItem(e)),r.push(t)}),r}flushCache(){let e;return this._cachedLayers.pipe(n.take(1),n.map(t=>(e=t.map(e=>e.name),t.forEach(e=>this.removeLayer(e)),e.forEach(e=>this.createLayer({name:e})),!0)))}};l=e=a([c.Service(),r("design:paramtypes",["function"==typeof(t=void 0!==m.BootstrapLogger&&m.BootstrapLogger)?t:Object])],l),exports.CacheService=l;
},{"./cache-layer":"z+ND","../../helpers/events":"7pWv","../../decorators/service/Service":"77za","../bootstrap-logger/index":"h/Q7"}],"tRBY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});class e{constructor(){this.deleteOnExpire="aggressive",this.cacheFlushInterval=36e5,this.maxAge=9e5,this.localStorage=!1}}exports.CacheServiceConfigInterface=e;
},{}],"ZZOB":[function(require,module,exports) {
"use strict";function e(e){for(var r in e)exports.hasOwnProperty(r)||(exports[r]=e[r])}Object.defineProperty(exports,"__esModule",{value:!0}),e(require("./cache-layer.service")),e(require("./cache-layer")),e(require("./cache-layer.interfaces"));
},{"./cache-layer.service":"0BAH","./cache-layer":"z+ND","./cache-layer.interfaces":"tRBY"}],"QmgA":[function(require,module,exports) {
"use strict";var e=this&&this.__decorate||function(e,t,r,i){var s,n=arguments.length,u=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(e,t,r,i);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(u=(n<3?s(u):n>3?s(t,r,u):s(t,r))||u);return n>3&&u&&Object.defineProperty(t,r,u),u};Object.defineProperty(exports,"__esModule",{value:!0});const t=require("rxjs"),r=require("../../decorators/service/Service");let i=class{constructor(){this.plugins=new t.BehaviorSubject([]),this.beforePlugins=new t.BehaviorSubject([]),this.afterPlugins=new t.BehaviorSubject([])}register(e){this.plugins.next([...this.plugins.getValue(),e])}registerBefore(e){this.beforePlugins.next([...this.plugins.getValue(),e])}registerAfter(e){this.afterPlugins.next([...this.plugins.getValue(),e])}getPlugins(){return this.plugins.getValue()}getAfterPlugins(){return this.afterPlugins.getValue()}getBeforePlugins(){return this.beforePlugins.getValue()}};i=e([r.Service()],i),exports.PluginService=i;
},{"../../decorators/service/Service":"77za"}],"PCfS":[function(require,module,exports) {
"use strict";var e,t=this&&this.__decorate||function(e,t,r,o){var c,n=arguments.length,i=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,o);else for(var a=e.length-1;a>=0;a--)(c=e[a])&&(i=(n<3?c(i):n>3?c(t,r,i):c(t,r))||i);return n>3&&i&&Object.defineProperty(t,r,i),i},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(exports,"__esModule",{value:!0});const o=require("../../decorators/service/Service"),c=require("../bootstrap-logger"),n=require("../../decorators/injector/injector.decorator"),i=require("rxjs");let a=class{constructor(){this.errorHandler=new i.Subject}init(){}exitHandler(e,t){this.errorHandler.next(t),e.cleanup&&this.logger.logExitHandler("AppStopped"),t&&console.log(t.stack),e.exit&&this.logger.logExitHandler("Unhandled error rejection"),process.exit(0)}onExitApp(e){return new i.Observable(t=>e&&e.length&&e.forEach(e=>process.on(e,e=>t.next(e))))}};t([n.Injector(c.BootstrapLogger),r("design:type","function"==typeof(e=void 0!==c.BootstrapLogger&&c.BootstrapLogger)?e:Object)],a.prototype,"logger",void 0),a=t([o.Service()],a),exports.ExitHandlerService=a;
},{"../../decorators/service/Service":"77za","../bootstrap-logger":"h/Q7","../../decorators/injector/injector.decorator":"eCMG"}],"nJhf":[function(require,module,exports) {
"use strict";function e(e){for(var r in e)exports.hasOwnProperty(r)||(exports[r]=e[r])}Object.defineProperty(exports,"__esModule",{value:!0}),e(require("./exit-handler.service"));
},{"./exit-handler.service":"PCfS"}],"jRTc":[function(require,module,exports) {
"use strict";var e=this&&this.__decorate||function(e,t,r,c){var a,o=arguments.length,i=o<3?t:null===c?c=Object.getOwnPropertyDescriptor(t,r):c;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,c);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(o<3?a(i):o>3?a(t,r,i):a(t,r))||i);return o>3&&i&&Object.defineProperty(t,r,i),i},t=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(exports,"__esModule",{value:!0});const r=require("../cache/index"),c=require("../../container"),a=require("../bootstrap-logger"),o=require("../../decorators/service/Service");let i=class extends r.CacheService{constructor(){super(c.Container.get(a.BootstrapLogger)),this.cacheLayer=this.createLayer({name:"request-cache-layer"})}put(e,t){return this.cacheLayer.putItem({key:e,data:t})}get(e){return this.cacheLayer.getItem(e)}};i=e([o.Service(),t("design:paramtypes",[])],i),exports.RequestCacheService=i;
},{"../cache/index":"ZZOB","../../container":"xCzv","../bootstrap-logger":"h/Q7","../../decorators/service/Service":"77za"}],"uweq":[function(require,module,exports) {
"use strict";var e,t,r=this&&this.__decorate||function(e,t,r,o){var c,a=arguments.length,s=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,o);else for(var i=e.length-1;i>=0;i--)(c=e[i])&&(s=(a<3?c(s):a>3?c(t,r,s):c(t,r))||s);return a>3&&s&&Object.defineProperty(t,r,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(exports,"__esModule",{value:!0});const c=require("../../decorators/service/Service"),a=require("rxjs"),s=require("http"),i=require("https"),n=require("./request.cache.service"),p=require("../../decorators/injector/injector.decorator"),u=require("rxjs/operators"),d=require("../bootstrap-logger");let h=class{get(e,t){return this.cache.cacheLayer.map.has(e)?(this.logger.log(`Item returned from cacahe: ${e}`),a.of(this.cache.cacheLayer.get(e).data)):new a.Observable(t=>{e.includes("https://")?i.get(e,e=>{let r="";e.on("data",e=>r+=e),e.on("end",()=>t.next(r))}).on("error",e=>{console.error("Error: "+e.message),t.error(e)}):s.get(e,e=>{let r="";e.on("data",e=>r+=e),e.on("end",()=>t.next(r))}).on("error",e=>{console.error("Error: "+e.message),t.error(e)})}).pipe(u.tap(t=>this.cache.cacheLayer.putItem({key:e,data:t})))}};r([p.Injector(n.RequestCacheService),o("design:type","function"==typeof(e=void 0!==n.RequestCacheService&&n.RequestCacheService)?e:Object)],h.prototype,"cache",void 0),r([p.Injector(d.BootstrapLogger),o("design:type","function"==typeof(t=void 0!==d.BootstrapLogger&&d.BootstrapLogger)?t:Object)],h.prototype,"logger",void 0),h=r([c.Service()],h),exports.RequestService=h;
},{"../../decorators/service/Service":"77za","./request.cache.service":"jRTc","../../decorators/injector/injector.decorator":"eCMG","../bootstrap-logger":"h/Q7"}],"mQZP":[function(require,module,exports) {
"use strict";function e(e){for(var r in e)exports.hasOwnProperty(r)||(exports[r]=e[r])}Object.defineProperty(exports,"__esModule",{value:!0}),e(require("./request.service")),e(require("./request.cache.service"));
},{"./request.service":"uweq","./request.cache.service":"jRTc"}],"UJFy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("path"),t=require("fs"),o=parseInt("0777",8);function r(c,n,s,i){"function"==typeof n?(s=n,n={}):n&&"object"==typeof n||(n={mode:n});let u=n.mode;const d=n.fs||t;void 0===u&&(u=o&~process.umask()),i||(i=null);const f=s||function(){};c=e.resolve(c),d.mkdir(c,u,function(t){if(!t)return f(null,i=i||c);switch(t.code){case"ENOENT":r(e.dirname(c),n,function(e,t){e?f(e,t):r(c,n,f,t)});break;default:d.stat(c,function(e,o){e||!o.isDirectory()?f(t,i):f(null,i)})}})}function c(r,n,s){n&&"object"==typeof n||(n={mode:n});let i=n.mode;const u=n.fs||t;void 0===i&&(i=o&~process.umask()),s||(s=null),r=e.resolve(r);try{u.mkdirSync(r,i),s=s||r}catch(d){switch(d.code){case"ENOENT":s=c(e.dirname(r),n,s),c(r,n,s);break;default:let t;try{t=u.statSync(r)}catch(f){throw d}if(!t.isDirectory())throw d}}return s}exports.mkdirp=r,exports.mkdirpSync=c;
},{}],"f2/G":[function(require,module,exports) {
"use strict";var e,r=this&&this.__decorate||function(e,r,t,i){var o,n=arguments.length,l=n<3?r:null===i?i=Object.getOwnPropertyDescriptor(r,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,r,t,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(l=(n<3?o(l):n>3?o(r,t,l):o(r,t))||l);return n>3&&l&&Object.defineProperty(r,t,l),l},t=this&&this.__metadata||function(e,r){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,r)};Object.defineProperty(exports,"__esModule",{value:!0});const i=require("../../decorators/service/Service"),o=require("fs"),n=require("rxjs"),l=require("rxjs/operators"),s=require("../bootstrap-logger"),c=require("../../decorators/injector/injector.decorator"),a=require("path"),u=require("./dist");let p=class{writeFile(e,r,t,i){return this.mkdirp(e).pipe(l.tap(()=>{this.logger.logFileService(`Bootstrap: @Service('${t}'): Saved inside ${e}`)}),l.switchMap(()=>this.writeFileAsyncP(e,r,i)))}writeFileAsync(e,r,t,i){return this.mkdirp(e).pipe(l.switchMap(()=>this.writeFileAsyncP(e,r,i)),l.map(()=>(this.logger.logFileService(`Bootstrap: external @Module('${t}') namespace: Saved inside ${e}`),`${e}/${r}`)))}writeFileSync(e,r){return o.writeFileSync.bind(null)(e,JSON.stringify(r,null,2)+"\n",{encoding:"utf-8"})}readFile(e){return JSON.parse(o.readFileSync.bind(null)(e,{encoding:"utf-8"}))}isPresent(e){return o.existsSync(e)}writeFileAsyncP(e,r,t){return new n.Observable(i=>o.writeFile(`${e}/${r}`,t,()=>i.next(!0)))}mkdirp(e){return new n.Observable(r=>{u.mkdirp(e,e=>{e?(console.error(e),r.error(!1)):r.next(!0),r.complete()})})}fileWalker(e,r="node_modules"){return new n.Observable(t=>{this.filewalker(e,(e,r)=>{e?t.error(e):t.next(r),t.complete()},r)})}filewalker(e,r,t="node_modules"){let i=[];const n=this.filewalker.bind(this);o.readdir(e,(l,s)=>{if(l)return r(l);let c=s.length;if(!c)return r(null,i);s.forEach(l=>{l=a.resolve(e,l),o.stat(l,(e,o)=>{o&&o.isDirectory()?(i.push(l),l.includes(t)?--c||r(null,i):n(l,(e,t)=>{i=i.concat(t),--c||r(null,i)},t)):(i.push(l),--c||r(null,i))})})})}};r([c.Injector(s.BootstrapLogger),t("design:type","function"==typeof(e=void 0!==s.BootstrapLogger&&s.BootstrapLogger)?e:Object)],p.prototype,"logger",void 0),p=r([i.Service()],p),exports.FileService=p;
},{"../../decorators/service/Service":"77za","../bootstrap-logger":"h/Q7","../../decorators/injector/injector.decorator":"eCMG","./dist":"UJFy"}],"YZ+r":[function(require,module,exports) {
"use strict";function e(e){for(var r in e)exports.hasOwnProperty(r)||(exports[r]=e[r])}Object.defineProperty(exports,"__esModule",{value:!0}),e(require("./file.service"));
},{"./file.service":"f2/G"}],"chPl":[function(require,module,exports) {
"use strict";var e,t=this&&this.__decorate||function(e,t,r,o){var c,i=arguments.length,n=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,o);else for(var f=e.length-1;f>=0;f--)(c=e[f])&&(n=(i<3?c(n):i>3?c(t,r,n):c(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(exports,"__esModule",{value:!0});const o=require("../../decorators/service/Service"),c=require("../../decorators/injector/injector.decorator"),i=require("../config/index");let n=class{gZipAll(){}};t([c.Injector(i.ConfigService),r("design:type","function"==typeof(e=void 0!==i.ConfigService&&i.ConfigService)?e:Object)],n.prototype,"config",void 0),n=t([o.Service()],n),exports.CompressionService=n;
},{"../../decorators/service/Service":"77za","../../decorators/injector/injector.decorator":"eCMG","../config/index":"BVuM"}],"g1nl":[function(require,module,exports) {
"use strict";var e=this&&this.__decorate||function(e,t,s,i){var o,r=arguments.length,a=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,s,i);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(a=(r<3?o(a):r>3?o(t,s,a):o(t,s))||a);return r>3&&a&&Object.defineProperty(t,s,a),a};Object.defineProperty(exports,"__esModule",{value:!0});const t=require("../../decorators/service/Service"),s=require("rxjs"),i=require("child_process");let o=class{constructor(){this.packagesToDownload=new s.BehaviorSubject([]),this.packages=[]}setPackages(e){this.packagesToDownload.next([...this.packagesToDownload.getValue(),...e])}preparePackages(){const e=this.packagesToDownload.getValue()||[];this.packages=[...new Set(e.map(e=>`${e.name}@${e.version}`))]}installPackages(){return new Promise((e,t)=>{this.preparePackages(),this.child&&(this.child.stdout.removeAllListeners("data"),this.child.stderr.removeAllListeners("data"),this.child.removeAllListeners("exit"),this.child.kill()),console.log(`Installing npm packages on child process! ${this.packages.toString()}`),this.child=i.spawn("npm",["i",...this.packages]),this.child.stdout.on("data",e=>process.stdout.write(e)),this.child.stderr.on("data",e=>{process.stdout.write(e)}),this.child.on("exit",e=>{console.log(`Child process exited with code ${e}`),console.log(`Installing npm packages DONE! ${this.packages.toString()}`),this.child=null})})}};o=e([t.Service()],o),exports.NpmService=o;
},{"../../decorators/service/Service":"77za"}],"9sYs":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.IPFS_PROVIDERS=[{name:"cloudflare",link:"https://cloudflare-ipfs.com/ipfs/"},{name:"main-ipfs-node",link:"https://ipfs.io/ipfs/"},{name:"infura",link:"https://ipfs.infura.io/ipfs/"},{name:"local",link:"http://127.0.0.1:8080/ipfs/"}];
},{}],"s/cb":[function(require,module,exports) {
"use strict";var e,t,i,r,o,s=this&&this.__decorate||function(e,t,i,r){var o,s=arguments.length,n=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,r);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(n=(s<3?o(n):s>3?o(t,i,n):o(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(exports,"__esModule",{value:!0});const c=require("../../decorators/service/Service"),a=require("rxjs"),p=require("rxjs/operators"),l=require("../request"),d=require("../file"),h=require("../bootstrap-logger/bootstrap-logger"),f=require("../../decorators/injector/injector.decorator"),g=require("../compression/compression.service"),u=require("../npm-service/npm.service"),v=require("./providers"),m=require("systemjs");let w=class{constructor(){this.defaultJsonFolder=`${process.cwd()}/package.json`,this.defaultTypescriptConfigJsonFolder=`${process.cwd()}/tsconfig.json`,this.providers=new a.BehaviorSubject(v.IPFS_PROVIDERS),this.defaultProvider=this.getProvider("main-ipfs-node"),this.defaultNamespaceFolder="@types",this.defaultOutputFolder="node_modules"}setDefaultProvider(e){this.defaultProvider=this.getProvider(e)}getProvider(e){return this.providers.getValue().filter(t=>t.name===e)[0].link}setProviders(...e){this.providers.next([...this.providers.getValue(),...e])}importExternalModule(e){return a.from(m.import(e))}validateConfig(e){if(!e)throw new Error("Bootstrap: missing config")}isWeb(){let e=!1;try{window&&(e=!0)}catch(t){}return e}loadTypescriptConfigJson(){let e={};try{e=this.fileService.readFile(this.defaultTypescriptConfigJsonFolder)}catch(t){console.error(`\n            Error in loading tsconfig.json in ${this.defaultTypescriptConfigJsonFolder}\n            Error: ${t}\n            Fallback to creating tsconfig.json\n            `)}return e.compilerOptions=e.compilerOptions||{},e.compilerOptions.typeRoots=e.compilerOptions.typeRoots||[],e}addNamespaceToTypeRoots(e){const t=`./${this.defaultOutputFolder}/@types/${e}`,i=this.loadTypescriptConfigJson();return i.compilerOptions.typeRoots.filter(e=>e===t).length||(i.compilerOptions.typeRoots.push(t),this.writeTypescriptConfigFile(i)),a.of(!0)}writeTypescriptConfigFile(e){this.fileService.writeFileSync(process.cwd()+"/tsconfig.json",e)}loadPackageJson(){let e;try{e=this.fileService.readFile(this.defaultJsonFolder)}catch(t){e={}}return e}loadNpmPackageJson(){let e;try{e=this.fileService.readFile(`${process.cwd()}/package.json`)}catch(t){e={}}return e}prepareDependencies(){const e=this.loadNpmPackageJson();return e.dependencies?Object.keys(e.dependencies).map(t=>({name:t,version:e.dependencies[t]})):[]}isModulePresent(e){let t=this.loadPackageJson().ipfs;const i=[];return t||(t=this.defaultIpfsConfig()),t.forEach(t=>{const r=t.dependencies.filter(t=>t===e);r.length&&i.push(r[0])}),i.length}filterUniquePackages(){let e=this.loadPackageJson().ipfs,t=[];if(e||(e=this.defaultIpfsConfig()),e.forEach(e=>{const i=e.dependencies.map(e=>({count:1,name:e})).reduce((e,t)=>(e[t.name]=(e[t.name]||0)+t.count,e),{}),r=Object.keys(i).filter(e=>i[e]>1);t=[...t,...r]}),t.length)throw new Error(`There are packages which are with the same hash ${JSON.stringify(t)}`);return t.length}defaultIpfsConfig(){return[{provider:this.defaultProvider,dependencies:[]}]}addPackageToJson(e){const t=this.loadPackageJson();let i=t.ipfs;i||(i=this.defaultIpfsConfig());const r=this.prepareDependencies();r.length&&(t.packages=r),this.isModulePresent(e)?this.logger.log(`Package with hash: ${e} present and will not be downloaded!`):(i[0].dependencies.push(e),t.ipfs=i),this.fileService.writeFileSync(this.defaultJsonFolder,t)}downloadIpfsModules(e){const t=e.map(e=>this.downloadIpfsModule(e));return a.combineLatest(t.length?t:a.of())}downloadIpfsModuleConfig(e){return this.requestService.get(e.provider+e.hash,e.hash).pipe(p.map(t=>{if(!t)throw new Error("Recieved undefined from provided address"+e.provider+e.hash);let i=t;const r="\x3c!--meta-rxdi-ipfs-module--\x3e";if(i.includes(r))try{i=t.split(r)[1]}catch(o){}return i}),p.map(e=>{let t=e;try{t=JSON.parse(e)}catch(i){}return t}))}combineDependencies(e,t){return a.combineLatest(e.length?e.map(e=>this.downloadIpfsModule({provider:t.provider,hash:e})):a.of(""))}writeFakeIndexIfMultiModule(e,t){return 2===t.length?this.fileService.writeFileAsyncP(`${e}${this.defaultNamespaceFolder}/${t[0]}`,"index.d.ts",""):a.of(!0)}downloadIpfsModule(e){if(!e.provider)throw new Error(`Missing configuration inside ${e.hash}`);if(!e.hash)throw new Error(`Missing configuration inside ${e.provider}`);let t,i;const r=e.provider+e.hash;let o,s,n,c,a,l;return this.downloadIpfsModuleConfig(e).pipe(p.tap(e=>{e.module||console.log("Todo: create logic to load module which is not from rxdi infrastructure for now can be used useDynamic which will do the same job!")}),p.filter(e=>!!e.module),p.map(r=>(s=r.name,n=s.split("/"),t=`${process.cwd()}/${this.defaultOutputFolder}/`,i=`${e.provider}${r.module}`,o=`${e.provider}${r.typings}`,r.dependencies=r.dependencies||[],r.packages=r.packages||[],c=r,this.npmService.setPackages(r.packages),a=2===s.split("/").length,l=a?s:s.split("/")[0],this.logger.logFileService(`Package config for module ${s} downloaded! ${JSON.stringify(r)}`),r)),p.switchMap(t=>this.combineDependencies(t.dependencies,e)),p.switchMap(()=>(this.logger.logFileService(`--------------------${s}--------------------`),this.logger.logFileService(`\nDownloading... ${r} `),this.logger.logFileService(`Config: ${JSON.stringify(c,null,2)} \n`),this.requestService.get(i,e.hash))),p.switchMap(e=>this.fileService.writeFile(t+s,"index.js",s,e)),p.switchMap(()=>this.requestService.get(o,e.hash)),p.switchMap(e=>this.fileService.writeFile(t+`${this.defaultNamespaceFolder}/${l}`,"index.d.ts",s,e)),p.tap(()=>{process.env.WRITE_FAKE_INDEX&&this.writeFakeIndexIfMultiModule(t,n)}),p.switchMap(()=>this.addNamespaceToTypeRoots(s.split("/")[0])),p.map(()=>({provider:e.provider,hash:e.hash,version:c.version,name:c.name,dependencies:c.dependencies,packages:c.packages})),p.tap(()=>{c.packages.length&&this.npmService.installPackages()}))}downloadTypings(e,t,i,r){return e?this.requestService.get(e).pipe(p.take(1),p.map(e=>(this.logger.logFileService("Done!"),e)),p.switchMap(e=>this.fileService.writeFile(t,i,r.typingsFileName,e))):a.of(!0)}importModule(e,t,{folderOverride:i,waitUntil:r}={}){const o=a.timer(r||2e4);return this.validateConfig(e),this.isWeb()?(m.config(Object.assign({map:{[t]:e.link}},e.SystemJsConfig)),m.import(e.link)):new a.Observable(t=>{const r=e.fileName,o=e.namespace,s=e.link,n=e.extension,c=e.SystemJsConfig||{},a=e.outputFolder||`/${this.defaultOutputFolder}/`,l=`${i||process.cwd()}${a}/${o}/${r}.${n}`,d=`${i||process.cwd()}${a}${o}`,h=`${r}.${n}`;Object.assign(c,{paths:Object.assign({[r]:l},c.paths)}),m.config(c),this.fileService.isPresent(l)?(this.logger.logImporter(`Bootstrap -> @Service('${r}'): present inside .${a}${o}/${r}.${n} folder and loaded from there`),this.importExternalModule(r).pipe(p.take(1)).subscribe(e=>{t.next(e),t.complete()},e=>{t.error(e),t.complete()})):(this.logger.logImporter(`Bootstrap -> @Service('${r}'): will be downloaded inside .${a}${o}/${r}.${n} folder and loaded from there`),this.logger.logImporter(`Bootstrap -> @Service('${r}'): ${s} downloading...`),this.requestService.get(s).pipe(p.take(1),p.tap(()=>this.logger.logImporter("Done!")),p.switchMap(t=>this.fileService.writeFile(d,h,e.fileName,t)),p.switchMap(()=>this.downloadTypings(e.typings,d,h,e)),p.switchMap(()=>this.importExternalModule(r))).subscribe(e=>{t.next(e),t.complete()},e=>{t.error(e),t.complete()}))}).pipe(p.takeUntil(o)).toPromise()}};s([f.Injector(l.RequestService),n("design:type","function"==typeof(e=void 0!==l.RequestService&&l.RequestService)?e:Object)],w.prototype,"requestService",void 0),s([f.Injector(d.FileService),n("design:type","function"==typeof(t=void 0!==d.FileService&&d.FileService)?t:Object)],w.prototype,"fileService",void 0),s([f.Injector(h.BootstrapLogger),n("design:type","function"==typeof(i=void 0!==h.BootstrapLogger&&h.BootstrapLogger)?i:Object)],w.prototype,"logger",void 0),s([f.Injector(g.CompressionService),n("design:type","function"==typeof(r=void 0!==g.CompressionService&&g.CompressionService)?r:Object)],w.prototype,"compressionService",void 0),s([f.Injector(u.NpmService),n("design:type","function"==typeof(o=void 0!==u.NpmService&&u.NpmService)?o:Object)],w.prototype,"npmService",void 0),w=s([c.Service()],w),exports.ExternalImporter=w;
},{"../../decorators/service/Service":"77za","../request":"mQZP","../file":"YZ+r","../bootstrap-logger/bootstrap-logger":"nFUx","../../decorators/injector/injector.decorator":"eCMG","../compression/compression.service":"chPl","../npm-service/npm.service":"g1nl","./providers":"9sYs"}],"jDw2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});class e{}exports.ExternalImporterConfig=e;class r{}exports.ExternalImporterIpfsConfig=r;
},{}],"HjWa":[function(require,module,exports) {
"use strict";function e(e){for(var r in e)exports.hasOwnProperty(r)||(exports[r]=e[r])}Object.defineProperty(exports,"__esModule",{value:!0}),e(require("./external-importer")),e(require("./external-importer-config"));
},{"./external-importer":"s/cb","./external-importer-config":"jDw2"}],"ndVO":[function(require,module,exports) {
"use strict";var e=this&&this.__decorate||function(e,t,r,c){var o,a=arguments.length,s=a<3?t:null===c?c=Object.getOwnPropertyDescriptor(t,r):c;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,c);else for(var i=e.length-1;i>=0;i--)(o=e[i])&&(s=(a<3?o(s):a>3?o(t,r,s):o(t,r))||s);return a>3&&s&&Object.defineProperty(t,r,s),s};Object.defineProperty(exports,"__esModule",{value:!0});const t=require("../../decorators/service/Service");let r=class{constructor(){this.lazyFactories=new Map}setLazyFactory(e,t){return this.lazyFactories.set(e,t),this.getLazyFactory(e)}getLazyFactory(e){return this.lazyFactories.get(e)}};r=e([t.Service()],r),exports.LazyFactory=r;
},{"../../decorators/service/Service":"77za"}],"zfzM":[function(require,module,exports) {
"use strict";var e=this&&this.__decorate||function(e,t,a,r){var o,i=arguments.length,d=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,a):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)d=Reflect.decorate(e,t,a,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(d=(i<3?o(d):i>3?o(t,a,d):o(t,a))||d);return i>3&&d&&Object.defineProperty(t,a,d),d};Object.defineProperty(exports,"__esModule",{value:!0});const t=require("../../../decorators/service/Service");let a=class{validateEmpty(e,t,a){if(!e){const e=a.charAt(0).toUpperCase()+a.slice(1);throw new Error(`\n            ${t.metadata.raw}\n            -> @Module: ${t.metadata.moduleName}\n            -> @Module hash: ${t.metadata.moduleHash}\n                --\x3e Maybe you forgot to import some ${e} inside ${t.metadata.moduleName} ?\n\n                Hint: run ts-lint again, looks like imported ${e} is undefined or null inside ${t.metadata.moduleName}\n            `)}}genericWrongPluggableError(e,t,a){if(e.metadata.type!==a){const r=e.metadata.type.charAt(0).toUpperCase()+e.metadata.type.slice(1),o=a.charAt(0).toUpperCase()+a.slice(1);throw new Error(`\n            ${t.metadata.raw}\n            -> @Module: '${t.metadata.moduleName}'\n            -> @Module hash: '${t.metadata.moduleHash}'\n                --\x3e @${r} '${e.metadata.moduleName}' provided, where expected class decorated with '@${o}' instead,\n            -> @Hint: please provide class with @Service decorator or remove ${e.metadata.moduleName} class\n            `)}}validateImports(e,t){if("module"!==e.metadata.type)throw new Error(`\n            ${t.metadata.raw}\n            -> @Module: '${t.metadata.moduleName}'\n            -> @Module hash: '${t.metadata.moduleHash}'\n                --\x3e @${e.metadata.type.charAt(0).toUpperCase()+e.metadata.type.slice(1)} '${e.originalName}' provided, where expected class decorated with '@Module' instead,\n            -> @Hint: please provide class with @Module decorator or remove ${e.originalName} from imports\n            `)}validateServices(e,t){this.validateEmpty(e,t,"service"),e.provide||this.genericWrongPluggableError(e,t,"service")}validatePlugin(e,t){this.validateEmpty(e,t,"plugin"),e.provide||this.genericWrongPluggableError(e,t,"plugin")}validateController(e,t){this.validateEmpty(e,t,"controller"),e.provide||this.genericWrongPluggableError(e,t,"controller")}validateEffect(e,t){this.validateEmpty(e,t,"effect"),e.provide||this.genericWrongPluggableError(e,t,"effect")}validateComponent(e,t){this.validateEmpty(e,t,"component"),e.provide||this.genericWrongPluggableError(e,t,"component")}};a=e([t.Service()],a),exports.ModuleValidators=a;
},{"../../../decorators/service/Service":"77za"}],"xrOV":[function(require,module,exports) {
"use strict";var e=this&&this.__decorate||function(e,r,t,o){var c,s=arguments.length,l=s<3?r:null===o?o=Object.getOwnPropertyDescriptor(r,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,r,t,o);else for(var n=e.length-1;n>=0;n--)(c=e[n])&&(l=(s<3?c(l):s>3?c(r,t,l):c(r,t))||l);return s>3&&l&&Object.defineProperty(r,t,l),l};Object.defineProperty(exports,"__esModule",{value:!0});const r=require("../../decorators/service/Service"),t=require("rxjs");let o=class{constructor(){this.controllers=new t.BehaviorSubject([])}register(e){this.controllers.next([...this.controllers.getValue(),e])}getControllers(){return this.controllers.getValue()}};o=e([r.Service()],o),exports.ControllersService=o;
},{"../../decorators/service/Service":"77za"}],"pcs9":[function(require,module,exports) {
"use strict";var e=this&&this.__decorate||function(e,t,r,c){var s,f=arguments.length,o=f<3?t:null===c?c=Object.getOwnPropertyDescriptor(t,r):c;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,c);else for(var i=e.length-1;i>=0;i--)(s=e[i])&&(o=(f<3?s(o):f>3?s(t,r,o):s(t,r))||o);return f>3&&o&&Object.defineProperty(t,r,o),o};Object.defineProperty(exports,"__esModule",{value:!0});const t=require("../../decorators/service/Service"),r=require("rxjs");let c=class{constructor(){this.effects=new r.BehaviorSubject([])}register(e){this.effects.next([...this.effects.getValue(),e])}getEffects(){return this.effects.getValue()}};c=e([t.Service()],c),exports.EffectsService=c;
},{"../../decorators/service/Service":"77za"}],"O4Pa":[function(require,module,exports) {
"use strict";var e=this&&this.__decorate||function(e,t,r,o){var c,n=arguments.length,s=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,o);else for(var i=e.length-1;i>=0;i--)(c=e[i])&&(s=(n<3?c(s):n>3?c(t,r,s):c(t,r))||s);return n>3&&s&&Object.defineProperty(t,r,s),s};Object.defineProperty(exports,"__esModule",{value:!0});const t=require("../../decorators/service/Service"),r=require("rxjs");let o=class{constructor(){this.components=new r.BehaviorSubject([])}register(e){this.components.next([...this.components.getValue(),e])}getComponents(){return this.components.getValue()}};o=e([t.Service()],o),exports.ComponentsService=o;
},{"../../decorators/service/Service":"77za"}],"VUra":[function(require,module,exports) {
"use strict";var e=this&&this.__decorate||function(e,t,r,o){var s,c=arguments.length,i=c<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,o);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(i=(c<3?s(i):c>3?s(t,r,i):s(t,r))||i);return c>3&&i&&Object.defineProperty(t,r,i),i};Object.defineProperty(exports,"__esModule",{value:!0});const t=require("../../decorators/service/Service"),r=require("rxjs");let o=class{constructor(){this.bootstraps=new r.BehaviorSubject([])}register(e){this.bootstraps.next([...this.bootstraps.getValue(),e])}getBootstraps(){return this.bootstraps.getValue()}};o=e([t.Service()],o),exports.BootstrapsServices=o;
},{"../../decorators/service/Service":"77za"}],"tuFP":[function(require,module,exports) {
"use strict";var e=this&&this.__decorate||function(e,r,t,s){var c,i=arguments.length,o=i<3?r:null===s?s=Object.getOwnPropertyDescriptor(r,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,r,t,s);else for(var n=e.length-1;n>=0;n--)(c=e[n])&&(o=(i<3?c(o):i>3?c(r,t,o):c(r,t))||o);return i>3&&o&&Object.defineProperty(r,t,o),o};Object.defineProperty(exports,"__esModule",{value:!0});const r=require("../../decorators/service/Service"),t=require("rxjs");let s=class{constructor(){this.services=new t.BehaviorSubject([])}register(e){this.services.next([...this.services.getValue(),e])}getServices(){return this.services.getValue()}};s=e([r.Service()],s),exports.ServicesService=s;
},{"../../decorators/service/Service":"77za"}],"rPyp":[function(require,module,exports) {
"use strict";var e,t,r,o,i,s,c,a,n,p=this&&this.__decorate||function(e,t,r,o){var i,s=arguments.length,c=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,r,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(s<3?i(c):s>3?i(t,r,c):i(t,r))||c);return s>3&&c&&Object.defineProperty(t,r,c),c},v=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(exports,"__esModule",{value:!0});const l=require("rxjs"),d=require("../../container"),u=require("../../decorators/service/Service"),y=require("../lazy-factory/lazy-factory.service"),f=require("../plugin/plugin.service"),h=require("../external-importer"),m=require("../../decorators/injector/injector.decorator"),S=require("./helpers/validators"),g=require("../constructor-watcher/constructor-watcher"),j=require("../controllers/controllers.service"),I=require("../effect/effect.service"),C=require("../components/components.service"),F=require("../bootstraps/bootstraps.service"),E=require("../services/services.service");let b=class{constructor(){this.watcherService=g.constructorWatcherService}setServices(e,t,r){e.forEach(e=>{this.validators.validateServices(e,t),this.setInjectedDependencies(e),e.provide&&e.provide.constructor===Function&&(e.provide=e.provide.name),e.provide&&e.useFactory?this.setUseFactory(e):e.provide&&e.useDynamic?this.setUseDynamic(e):e.provide&&e.useClass&&e.useClass.constructor===Function?this.setUseClass(e):e.provide&&e.useValue?this.setUseValue(e):(r.putItem({data:e,key:e.name}),this.servicesService.register(e))})}setInjectedDependencies(e){e.deps=e.deps||[],e.deps.length&&(e.deps=e.deps.map(e=>d.Container.get(e)))}setUseValue(e){d.Container.set(e.provide,e.useValue),e.lazy&&this.lazyFactoryService.setLazyFactory(e.provide,l.of(d.Container.get(e.provide)))}setUseClass(e){e.lazy?this.lazyFactoryService.setLazyFactory(e.provide,l.of(d.Container.get(e.useClass))):d.Container.set(e.provide,d.Container.get(e.useClass))}setUseDynamic(e){const t=this.externalImporter.importModule(e.useDynamic,e.provide);this.lazyFactoryService.setLazyFactory(e.provide,t)}setUseFactory(e){const t=e.useFactory;e.useFactory=(()=>t(...e.deps)),e.lazy?this.lazyFactoryService.setLazyFactory(e.provide,e.useFactory()):d.Container.set(e.provide,e.useFactory())}setControllers(e,t,r){e.forEach(e=>{this.validators.validateController(e,t),r.putItem({data:e,key:e.name}),this.controllersService.register(e)})}setEffects(e,t,r){e.forEach(e=>{this.validators.validateEffect(e,t),r.putItem({data:e,key:e.name}),this.effectsService.register(e)})}setComponents(e,t,r){e.forEach(e=>{this.validators.validateComponent(e,t),r.putItem({data:e,key:e.name}),this.componentsService.register(e)})}setPlugins(e,t,r){e.forEach(e=>{this.validators.validatePlugin(e,t),r.putItem({data:e,key:e.name}),this.pluginService.register(e)})}setBootstraps(e,t,r){e.forEach(e=>{this.validators.validateEmpty(e,t,e.metadata.type),r.putItem({data:e,key:e.name}),this.bootstraps.register(e)})}setAfterPlugins(e,t,r){e.forEach(e=>{this.validators.validatePlugin(e,t),r.putItem({data:e,key:e.name}),this.pluginService.registerAfter(e)})}setBeforePlugins(e,t,r){e.forEach(e=>{this.validators.validatePlugin(e,t),r.putItem({data:e,key:e.name}),this.pluginService.registerBefore(e)})}setImports(e,t){e.forEach(e=>{if(this.validators.validateImports(e,t),!e)throw new Error("Missing import module");d.Container.get(e)})}};p([m.Injector(y.LazyFactory),v("design:type","function"==typeof(e=void 0!==y.LazyFactory&&y.LazyFactory)?e:Object)],b.prototype,"lazyFactoryService",void 0),p([m.Injector(f.PluginService),v("design:type","function"==typeof(t=void 0!==f.PluginService&&f.PluginService)?t:Object)],b.prototype,"pluginService",void 0),p([m.Injector(C.ComponentsService),v("design:type","function"==typeof(r=void 0!==C.ComponentsService&&C.ComponentsService)?r:Object)],b.prototype,"componentsService",void 0),p([m.Injector(j.ControllersService),v("design:type","function"==typeof(o=void 0!==j.ControllersService&&j.ControllersService)?o:Object)],b.prototype,"controllersService",void 0),p([m.Injector(I.EffectsService),v("design:type","function"==typeof(i=void 0!==I.EffectsService&&I.EffectsService)?i:Object)],b.prototype,"effectsService",void 0),p([m.Injector(F.BootstrapsServices),v("design:type","function"==typeof(s=void 0!==F.BootstrapsServices&&F.BootstrapsServices)?s:Object)],b.prototype,"bootstraps",void 0),p([m.Injector(h.ExternalImporter),v("design:type","function"==typeof(c=void 0!==h.ExternalImporter&&h.ExternalImporter)?c:Object)],b.prototype,"externalImporter",void 0),p([m.Injector(S.ModuleValidators),v("design:type","function"==typeof(a=void 0!==S.ModuleValidators&&S.ModuleValidators)?a:Object)],b.prototype,"validators",void 0),p([m.Injector(E.ServicesService),v("design:type","function"==typeof(n=void 0!==E.ServicesService&&E.ServicesService)?n:Object)],b.prototype,"servicesService",void 0),b=p([u.Service()],b),exports.ModuleService=b;
},{"../../container":"xCzv","../../decorators/service/Service":"77za","../lazy-factory/lazy-factory.service":"ndVO","../plugin/plugin.service":"QmgA","../external-importer":"HjWa","../../decorators/injector/injector.decorator":"eCMG","./helpers/validators":"zfzM","../constructor-watcher/constructor-watcher":"/Yna","../controllers/controllers.service":"xrOV","../effect/effect.service":"pcs9","../components/components.service":"O4Pa","../bootstraps/bootstraps.service":"VUra","../services/services.service":"tuFP"}],"R1Zp":[function(require,module,exports) {
"use strict";function e(e){for(var r in e)exports.hasOwnProperty(r)||(exports[r]=e[r])}Object.defineProperty(exports,"__esModule",{value:!0}),e(require("./module.service")),e(require("./helpers/validators"));
},{"./module.service":"rPyp","./helpers/validators":"zfzM"}],"elWd":[function(require,module,exports) {
"use strict";var e,t,r=this&&this.__decorate||function(e,t,r,o){var a,i=arguments.length,n=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(n=(i<3?a(n):i>3?a(t,r,n):a(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(exports,"__esModule",{value:!0});const a=require("../../container"),i=require("../cache/cache-layer.service"),n=require("../../helpers/events"),c=require("rxjs/operators"),s=require("rxjs"),l=require("../bootstrap-logger/bootstrap-logger"),p=require("../../decorators/injector/injector.decorator"),d=require("../../decorators/service/Service");let g=class{resolveDependencies(e,t,r){this.cacheService.getLayer(n.InternalLayers.modules).putItem({key:e,data:t});const o=this.cacheService.getLayer(e);return o.putItem({key:n.InternalEvents.config,data:{moduleName:r,moduleHash:e}}),o.getItemObservable(n.InternalEvents.load).pipe(c.switchMap(e=>e.data?o.items.asObservable():s.of(null)),c.filter(e=>e&&e.length),c.map(this.resolveContainerDependencies(t,r)))}resolveContainerDependencies(e,t){return r=>(r.forEach(r=>{if(r.key===n.InternalEvents.load||r.key===n.InternalEvents.config)return;const o=this.cacheService.searchForItem(r.data);if(o){if(o.provide)return o;const r=o.metadata.type.charAt(0).toUpperCase()+o.metadata.type.slice(1);return this.bootstrapLogger.log(`Start -> @Module('${t}')${this.bootstrapLogger.logHashes(`(${e.name})`)}: @${r}('${o.originalName}')${this.bootstrapLogger.logHashes(`(${o.name})`)}`+" initialized!"),a.Container.get(o)}throw new Error("not found")}),r)}};r([p.Injector(l.BootstrapLogger),o("design:type","function"==typeof(e=void 0!==l.BootstrapLogger&&l.BootstrapLogger)?e:Object)],g.prototype,"bootstrapLogger",void 0),r([p.Injector(i.CacheService),o("design:type","function"==typeof(t=void 0!==i.CacheService&&i.CacheService)?t:Object)],g.prototype,"cacheService",void 0),g=r([d.Service()],g),exports.ResolverService=g;
},{"../../container":"xCzv","../cache/cache-layer.service":"0BAH","../../helpers/events":"7pWv","../bootstrap-logger/bootstrap-logger":"nFUx","../../decorators/injector/injector.decorator":"eCMG","../../decorators/service/Service":"77za"}],"S60t":[function(require,module,exports) {
"use strict";function e(e){for(var r in e)exports.hasOwnProperty(r)||(exports[r]=e[r])}Object.defineProperty(exports,"__esModule",{value:!0}),e(require("./resolver.service"));
},{"./resolver.service":"elWd"}],"jena":[function(require,module,exports) {
"use strict";var e=this&&this.__decorate||function(e,t,r,c){var o,s=arguments.length,i=s<3?t:null===c?c=Object.getOwnPropertyDescriptor(t,r):c;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,c);else for(var n=e.length-1;n>=0;n--)(o=e[n])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i};Object.defineProperty(exports,"__esModule",{value:!0});const t=require("../../decorators/service/Service"),r=require("rxjs");let c=class{constructor(){this.appStarted=new r.Subject}};c=e([t.Service()],c),exports.AfterStarterService=c;
},{"../../decorators/service/Service":"77za"}],"7PIZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../container/Container");exports.logExtendedInjectables=((n,t)=>{e.Container.has(n)&&t&&console.log(`Warn: Injection Token '${n.name||n}' is extended after it has being declared! ${JSON.stringify(e.Container.get(n))}`)});
},{"../container/Container":"SgUW"}],"HjP5":[function(require,module,exports) {
"use strict";var e,t,i,r,n,s,o,c,a,l,f,h=this&&this.__decorate||function(e,t,i,r){var n,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(o=(s<3?n(o):s>3?n(t,i,o):n(t,i))||o);return s>3&&o&&Object.defineProperty(t,i,o),o},p=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},v=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))(function(n,s){function o(e){try{a(r.next(e))}catch(t){s(t)}}function c(e){try{a(r.throw(e))}catch(t){s(t)}}function a(e){e.done?n(e.value):new i(function(t){t(e.value)}).then(o,c)}a((r=r.apply(e,t||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0});const g=require("rxjs"),u=require("../../container"),y=require("../bootstrap-logger/bootstrap-logger"),d=require("../cache/cache-layer.service"),S=require("../../helpers/events"),b=require("../lazy-factory/lazy-factory.service"),m=require("../config/config.service"),C=require("../plugin/plugin.service"),L=require("rxjs/operators"),j=require("../effect/effect.service"),P=require("../controllers/controllers.service"),q=require("../components/components.service"),w=require("../bootstraps/bootstraps.service"),F=require("../services/services.service"),O=require("../after-starter/after-starter.service"),B=require("../../helpers/log"),A=require("../../decorators/service/Service");let R=class{constructor(e,t,i,r,n,s,o,c,a,l,f){this.logger=e,this.cacheService=t,this.lazyFactoriesService=i,this.configService=r,this.controllersService=n,this.effectsService=s,this.pluginService=o,this.componentsService=c,this.bootstrapsService=a,this.servicesService=l,this.afterStarterService=f,this.globalConfig=this.cacheService.createLayer({name:S.InternalLayers.globalConfig})}start(e,t){this.configService.setConfig(t),this.globalConfig.putItem({key:S.InternalEvents.config,data:t}),u.Container.get(e);const i=Array.from(this.lazyFactoriesService.lazyFactories.keys());return g.of(i).pipe(L.map(e=>this.prepareAsyncChainables(e)),L.switchMap(e=>g.combineLatest(e).pipe(L.take(1),L.map(e=>this.attachLazyLoadedChainables(i,e)),L.map(()=>this.validateSystem()),L.switchMap(()=>g.combineLatest(this.asyncChainableControllers())),L.switchMap(()=>g.combineLatest(this.asyncChainablePluginsBeforeRegister())),L.switchMap(()=>g.combineLatest(this.asyncChainablePluginsRegister())),L.switchMap(()=>g.combineLatest(this.asyncChainablePluginsAfterRegister())),L.switchMap(()=>g.combineLatest(this.asyncChainableServices())),L.switchMap(()=>g.combineLatest(this.asyncChainableEffects())),L.switchMap(()=>g.combineLatest(this.asyncChainableComponents())),L.map(()=>this.loadApplication()),L.switchMap(()=>g.combineLatest(this.asyncChainableBootstraps())),L.map(()=>this.final()))))}final(){return this.afterStarterService.appStarted.next(!0),this.configService.config.init||this.logger.log("Bootstrap -> press start!"),u.Container}asyncChainableComponents(){return[g.of(!0),...this.componentsService.getComponents().filter(e=>this.genericFilter(e,"components")).map(e=>v(this,void 0,void 0,function*(){return yield u.Container.get(e)}))]}asyncChainableBootstraps(){return[g.of(!0),...this.bootstrapsService.getBootstraps().map(e=>v(this,void 0,void 0,function*(){return yield u.Container.get(e)}))]}asyncChainableEffects(){return[g.of(!0),...this.effectsService.getEffects().filter(e=>this.genericFilter(e,"effects")).map(e=>v(this,void 0,void 0,function*(){return yield u.Container.get(e)}))]}asyncChainableServices(){return[g.of(!0),...this.servicesService.getServices().filter(e=>this.genericFilter(e,"services")).map(e=>v(this,void 0,void 0,function*(){return yield u.Container.get(e)}))]}asyncChainableControllers(){return[g.of(!0),...this.controllersService.getControllers().filter(e=>this.genericFilter(e,"controllers")).map(e=>v(this,void 0,void 0,function*(){return yield u.Container.get(e)}))]}asyncChainablePluginsRegister(){return[g.of(!0),...this.pluginService.getPlugins().filter(e=>this.genericFilter(e,"plugins")).map(e=>v(this,void 0,void 0,function*(){return yield this.registerPlugin(e)}))]}asyncChainablePluginsAfterRegister(){return[g.of(!0),...this.pluginService.getAfterPlugins().filter(e=>this.genericFilter(e,"pluginsAfter")).map(e=>v(this,void 0,void 0,function*(){return yield this.registerPlugin(e)}))]}asyncChainablePluginsBeforeRegister(){return[g.of(!0),...this.pluginService.getBeforePlugins().filter(e=>this.genericFilter(e,"pluginsBefore")).map(e=>v(this,void 0,void 0,function*(){return yield this.registerPlugin(e)}))]}genericFilter(e,t){return this.configService.config.initOptions[t]||e.metadata.options&&e.metadata.options.init||this.configService.config.init}registerPlugin(e){return v(this,void 0,void 0,function*(){const t=u.Container.get(e);return yield t.register(),t})}prepareAsyncChainables(e){const t=[g.of(!0)],i={},r=e=>e.name||e;return e.map(e=>{const n=Date.now();i[r(e)]={started:n,end:null},this.logger.log(`Bootstrap -> @Service('${r(e)}'): loading...`);const s=g.from(this.lazyFactoriesService.getLazyFactory(e)).pipe(L.shareReplay(1));t.push(s),s.subscribe(()=>{this.logger.log(`Bootstrap -> @Service('${r(e)}'): loading finished after ${Date.now()-i[r(e)].started}ms !`),delete i[r(e)]})}),t}validateSystem(){this.configService.config.strict&&this.cacheService.searchForDuplicateDependenciesInsideApp()}attachLazyLoadedChainables(e,t){t.splice(0,1);let i=0;return e.map(e=>{B.logExtendedInjectables(e,this.configService.config.experimental.logExtendedInjectables),u.Container.set(e,t[i++])}),!0}loadApplication(){return Array.from(this.cacheService.getLayer(S.InternalLayers.modules).map.keys()).forEach(e=>this.cacheService.getLayer(e).putItem({key:S.InternalEvents.load,data:this.configService.config.init})),!0}};R=h([A.Service(),p("design:paramtypes",["function"==typeof(e=void 0!==y.BootstrapLogger&&y.BootstrapLogger)?e:Object,"function"==typeof(t=void 0!==d.CacheService&&d.CacheService)?t:Object,"function"==typeof(i=void 0!==b.LazyFactory&&b.LazyFactory)?i:Object,"function"==typeof(r=void 0!==m.ConfigService&&m.ConfigService)?r:Object,"function"==typeof(n=void 0!==P.ControllersService&&P.ControllersService)?n:Object,"function"==typeof(s=void 0!==j.EffectsService&&j.EffectsService)?s:Object,"function"==typeof(o=void 0!==C.PluginService&&C.PluginService)?o:Object,"function"==typeof(c=void 0!==q.ComponentsService&&q.ComponentsService)?c:Object,"function"==typeof(a=void 0!==w.BootstrapsServices&&w.BootstrapsServices)?a:Object,"function"==typeof(l=void 0!==F.ServicesService&&F.ServicesService)?l:Object,"function"==typeof(f=void 0!==O.AfterStarterService&&O.AfterStarterService)?f:Object])],R),exports.BootstrapService=R;
},{"../../container":"xCzv","../bootstrap-logger/bootstrap-logger":"nFUx","../cache/cache-layer.service":"0BAH","../../helpers/events":"7pWv","../lazy-factory/lazy-factory.service":"ndVO","../config/config.service":"xj6s","../plugin/plugin.service":"QmgA","../effect/effect.service":"pcs9","../controllers/controllers.service":"xrOV","../components/components.service":"O4Pa","../bootstraps/bootstraps.service":"VUra","../services/services.service":"tuFP","../after-starter/after-starter.service":"jena","../../helpers/log":"7PIZ","../../decorators/service/Service":"77za"}],"nIal":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../services/exit-handler/exit-handler.service"),i=require("../container");exports.exitHandlerInit=(()=>{const n=i.Container.get(e.ExitHandlerService);n.init(),process.on("exit",n.exitHandler.bind(n,{cleanup:!0})),process.on("SIGINT",n.exitHandler.bind(n,{exit:!0})),process.on("SIGUSR1",n.exitHandler.bind(n,{exit:!0})),process.on("SIGUSR2",n.exitHandler.bind(n,{exit:!0})),process.on("uncaughtException",n.exitHandler.bind(n,{exit:!0}))});
},{"../services/exit-handler/exit-handler.service":"PCfS","../container":"xCzv"}],"T65o":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),require("reflect-metadata");const e=require("../container"),r=require("../services/bootstrap/bootstrap.service"),t=require("./exit-handler");t.exitHandlerInit();const o=e.Container.get(r.BootstrapService);exports.Bootstrap=((e,r)=>o.start(e,r)),exports.BootstrapPromisify=((e,r)=>o.start(e,r).toPromise()),exports.BootstrapFramework=((r,t,s)=>(o.configService.setConfig(s),t.map(r=>e.Container.get(r)),o.start(r,s))),exports.setup=((e,r=[],t)=>{const o=require("../decorators/module/module.decorator").Module;return exports.BootstrapFramework(o({imports:e.imports||[],providers:e.providers||[],services:e.services||[],bootstrap:e.bootstrap||[],components:e.components||[],controllers:e.controllers||[],effects:e.effects||[],plugins:e.plugins||[],afterPlugins:e.afterPlugins||[],beforePlugins:e.beforePlugins||[]})(function(){}),r,t)}),exports.createTestBed=exports.setup;
},{"../container":"xCzv","../services/bootstrap/bootstrap.service":"HjP5","./exit-handler":"nIal","../decorators/module/module.decorator":"SCQX"}],"iMXC":[function(require,module,exports) {
"use strict";function e(e){for(var r in e)exports.hasOwnProperty(r)||(exports[r]=e[r])}Object.defineProperty(exports,"__esModule",{value:!0}),e(require("./bootstrap")),e(require("./create-unique-hash")),e(require("./generic-constructor")),e(require("./sha256"));
},{"./bootstrap":"T65o","./create-unique-hash":"7yeE","./generic-constructor":"RSuO","./sha256":"5ixs"}],"LgOJ":[function(require,module,exports) {
"use strict";var e=this&&this.__decorate||function(e,t,r,a){var i,n=arguments.length,o=n<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(o=(n<3?i(o):n>3?i(t,r,o):i(t,r))||o);return n>3&&o&&Object.defineProperty(t,r,o),o};Object.defineProperty(exports,"__esModule",{value:!0});const t=require("../../decorators/service/Service"),r=require("../../helpers");let a=class{generateHashData(e,t){const r=e.services||[],a=e.imports||[],i=r=>r&&r.provide?r.provide:r?(this.validateCustomInjectable(r,e,t),{moduleName:r.metadata.moduleName,hash:r.metadata.moduleHash}):void 0;return[[...r.map(e=>i(e))],[...a.map(e=>i(e))]]}validateCustomInjectableKeys(e){}validateCustomInjectable(e,t,r){if(!e.metadata&&!e.provide)throw new Error(`\n                ---- Wrong service ${JSON.stringify(e)} provided inside '${r.name}' ----\n                @Module({\n                    services: ${JSON.stringify([...t.services.filter(e=>!e.metadata),...t.services.filter(e=>e&&e.metadata&&e.metadata.moduleName).map(e=>e.metadata.moduleName)])}\n                })\n                ${JSON.stringify(`${r}`,null,2)}\n\n                Hint: System recieved Object but it is not with appropriate format you must provide object with following parameters:\n\n                YourObject: ${JSON.stringify(e)}\n\n                Option 1. [YourClass]\n\n                Option 2. [{provide: 'your-value', useClass: YourClass}]\n\n                Option 3. [{provide: 'your-value', deps: [YourClass], useFactory: (test: YourClass) => {}}]\n\n                Option 4. [{provide: 'your-value', useDynamic: {}}]\n\n                Option 5. [{provide: 'your-value', useValue: 'your-value'}]\n            `)}parseModuleTemplate(e,t,r){return`\n            ---- @gapi module '${e}' metadata----\n            @Module({\n                imports: ${JSON.stringify(t[1],null,"\t")},\n                services: ${JSON.stringify(t[0],null,"\t")}\n            })\n            ${JSON.stringify(r,null,2)}\n        `}createUniqueHash(e){return r.createUniqueHash(e)}};a=e([t.Service()],a),exports.MetadataService=a;
},{"../../decorators/service/Service":"77za","../../helpers":"iMXC"}],"qF8u":[function(require,module,exports) {
"use strict";function e(e){for(var r in e)exports.hasOwnProperty(r)||(exports[r]=e[r])}Object.defineProperty(exports,"__esModule",{value:!0}),e(require("./metadata.service"));
},{"./metadata.service":"LgOJ"}],"gKH0":[function(require,module,exports) {
"use strict";function e(e){for(var r in e)exports.hasOwnProperty(r)||(exports[r]=e[r])}Object.defineProperty(exports,"__esModule",{value:!0}),e(require("./compression.service"));
},{"./compression.service":"chPl"}],"SWMP":[function(require,module,exports) {
"use strict";function e(e){for(var r in e)exports.hasOwnProperty(r)||(exports[r]=e[r])}Object.defineProperty(exports,"__esModule",{value:!0}),e(require("./effect.service"));
},{"./effect.service":"pcs9"}],"+In9":[function(require,module,exports) {
"use strict";function e(e){for(var r in e)exports.hasOwnProperty(r)||(exports[r]=e[r])}Object.defineProperty(exports,"__esModule",{value:!0}),e(require("./controllers.service"));
},{"./controllers.service":"xrOV"}],"WWyn":[function(require,module,exports) {
"use strict";function e(e){for(var r in e)exports.hasOwnProperty(r)||(exports[r]=e[r])}Object.defineProperty(exports,"__esModule",{value:!0}),e(require("./components.service"));
},{"./components.service":"O4Pa"}],"n4fE":[function(require,module,exports) {
"use strict";function e(e){for(var r in e)exports.hasOwnProperty(r)||(exports[r]=e[r])}Object.defineProperty(exports,"__esModule",{value:!0}),e(require("./bootstraps.service"));
},{"./bootstraps.service":"VUra"}],"r8R/":[function(require,module,exports) {
"use strict";function e(e){for(var r in e)exports.hasOwnProperty(r)||(exports[r]=e[r])}Object.defineProperty(exports,"__esModule",{value:!0}),e(require("./services.service"));
},{"./services.service":"tuFP"}],"lNul":[function(require,module,exports) {
"use strict";var e,t=this&&this.__decorate||function(e,t,r,i){var n,c=arguments.length,l=c<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,r,i);else for(var o=e.length-1;o>=0;o--)(n=e[o])&&(l=(c<3?n(l):c>3?n(t,r,l):n(t,r))||l);return c>3&&l&&Object.defineProperty(t,r,l),l},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(exports,"__esModule",{value:!0});const i=require("../plugin/plugin.service"),n=require("../../decorators/service/Service");let c=class{constructor(e){this.pluginService=e}listPlugins(){return this.pluginService.getPlugins()}getPlugin(e){return this.pluginService.getPlugins().filter(t=>t.name===e.name)[0]}};c=t([n.Service(),r("design:paramtypes",["function"==typeof(e=void 0!==i.PluginService&&i.PluginService)?e:Object])],c),exports.PluginManager=c;
},{"../plugin/plugin.service":"QmgA","../../decorators/service/Service":"77za"}],"1ApS":[function(require,module,exports) {
"use strict";function e(e){for(var r in e)exports.hasOwnProperty(r)||(exports[r]=e[r])}Object.defineProperty(exports,"__esModule",{value:!0}),e(require("./cache/index")),e(require("./plugin/plugin.service")),e(require("./bootstrap-logger/index")),e(require("./exit-handler/index")),e(require("./external-importer/index")),e(require("./module/index")),e(require("./resolver/index")),e(require("./config/index")),e(require("./metadata/index")),e(require("./compression/index")),e(require("./file/index")),e(require("./constructor-watcher/index")),e(require("./effect/index")),e(require("./controllers/index")),e(require("./components/index")),e(require("./bootstraps/index")),e(require("./services/index")),e(require("./plugin-manager/plugin-manager")),e(require("./after-starter/after-starter.service"));
},{"./cache/index":"ZZOB","./plugin/plugin.service":"QmgA","./bootstrap-logger/index":"h/Q7","./exit-handler/index":"nJhf","./external-importer/index":"HjWa","./module/index":"R1Zp","./resolver/index":"S60t","./config/index":"BVuM","./metadata/index":"qF8u","./compression/index":"gKH0","./file/index":"YZ+r","./constructor-watcher/index":"aTjn","./effect/index":"SWMP","./controllers/index":"+In9","./components/index":"WWyn","./bootstraps/index":"n4fE","./services/index":"r8R/","./plugin-manager/plugin-manager":"lNul","./after-starter/after-starter.service":"jena"}],"RSuO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../container"),s=require("../services"),t=e.Container.get(s.ModuleService),r=e.Container.get(s.BootstrapLogger);function o(s,o,n){return function(i,l){return s?(s.imports&&t.setImports(s.imports,o),s.services&&t.setServices(s.services,o,n),s.providers&&t.setServices(s.providers,o,n),s.controllers&&t.setControllers(s.controllers,o,n),s.effects&&t.setEffects(s.effects,o,n),s.components&&t.setComponents(s.components,o,n),s.beforePlugins&&t.setBeforePlugins(s.beforePlugins,o,n),s.plugins&&t.setPlugins(s.plugins,o,n),s.afterPlugins&&t.setAfterPlugins(s.afterPlugins,o,n),s.bootstrap&&t.setBootstraps(s.bootstrap,o,n),r.log(`Bootstrap -> @Module('${i.originalName}')${r.logHashes(`(${i.name})`)}: finished!`),e.Container.get(i)):new i}}exports.GenericConstruct=o;
},{"../container":"xCzv","../services":"1ApS"}],"SCQX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../../container"),r=require("../../services/cache/cache-layer.service"),o=require("../../helpers/generic-constructor"),t=require("../../services/bootstrap-logger/bootstrap-logger"),s=require("../../services/resolver/resolver.service"),n=require("../../services/metadata/metadata.service"),i=require("../../services/module/module.service"),a=e.Container.get(t.BootstrapLogger),c=e.Container.get(s.ResolverService),l=e.Container.get(r.CacheService),u=e.Container.get(n.MetadataService),g=e.Container.get(i.ModuleService);function m(r){return t=>{r=r||{};const s=Object.assign(t),n=t.name||t.constructor.name,i=u.generateHashData(r,s),m=u.parseModuleTemplate(n,i,`${t}`),d=u.createUniqueHash(m);Object.defineProperty(s,"originalName",{value:s.name||s.constructor.name,writable:!1}),Object.defineProperty(s,"name",{value:d,writable:!0});const f=l.createLayer({name:d});s.metadata={moduleName:s.originalName,moduleHash:d,options:null,type:"module",raw:m};const p=function(...e){return a.log(`Bootstrap -> @Module('${s.originalName}')${a.logHashes(`(${s.name})`)}: loading...`),o.GenericConstruct(r,s,f)(s,e)};if(Object.assign(p,s),c.resolveDependencies(d,s,n).subscribe(()=>a.log(`Start -> @Module('${s.originalName}')${a.logHashes(`(${s.name})`)}: loaded!`)),Object.getOwnPropertyNames(s).filter(e=>"function"==typeof s[e]).map(e=>Object.defineProperty(p,e,{configurable:!0,writable:!0,value:s[e]})),s.forRoot){const e=p.forRoot;p.forRoot=function(...r){const o=e(...r);if(!o)throw new Error(`forRoot configuration inside ${p.name} is returning undefined or null`);return o.frameworkImports&&g.setImports(o.frameworkImports,s),o.services&&g.setServices(o.services,s,f),o.providers&&g.setServices(o.providers,s,f),o.components&&g.setComponents(o.components,s,f),o.effects&&g.setEffects(o.effects,s,f),o.controllers&&g.setControllers(o.controllers,s,f),o.beforePlugins&&g.setBeforePlugins(o.beforePlugins,s,f),o.plugins&&g.setPlugins(o.plugins,s,f),o.afterPlugins&&g.setAfterPlugins(o.afterPlugins,s,f),o.ngModule?o.ngModule:o.module?o.module:o}}const v={type:p};return e.Container.set(v),p}}exports.Module=m,exports.NgModule=m;
},{"../../container":"xCzv","../../services/cache/cache-layer.service":"0BAH","../../helpers/generic-constructor":"RSuO","../../services/bootstrap-logger/bootstrap-logger":"nFUx","../../services/resolver/resolver.service":"elWd","../../services/metadata/metadata.service":"LgOJ","../../services/module/module.service":"rPyp"}],"+y/V":[function(require,module,exports) {
"use strict";function e(e){for(var r in e)exports.hasOwnProperty(r)||(exports[r]=e[r])}Object.defineProperty(exports,"__esModule",{value:!0}),e(require("./module.decorator")),e(require("./module.interfaces"));
},{"./module.decorator":"SCQX","./module.interfaces":"gqme"}],"CaJ3":[function(require,module,exports) {
"use strict";function e(e){for(var r in e)exports.hasOwnProperty(r)||(exports[r]=e[r])}Object.defineProperty(exports,"__esModule",{value:!0}),e(require("./injector.decorator"));
},{"./injector.decorator":"eCMG"}],"FjRU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../../container"),r=require("../../services/module/module.service");function t(t){return e.Container.get(r.ModuleService).watcherService.getByClass(t)}exports.InjectSoft=t;
},{"../../container":"xCzv","../../services/module/module.service":"rPyp"}],"2Gz9":[function(require,module,exports) {
"use strict";function e(e){for(var r in e)exports.hasOwnProperty(r)||(exports[r]=e[r])}Object.defineProperty(exports,"__esModule",{value:!0}),e(require("./inject-soft.decorator"));
},{"./inject-soft.decorator":"FjRU"}],"Rch5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});class e extends Error{constructor(t,r){super(`Cannot inject value into '${t.constructor.name}.${r}'. `+"Please make sure you setup reflect-metadata properly and you don't use interfaces without service tokens as injection value."),this.name="ServiceNotFoundError",Object.setPrototypeOf(this,e.prototype)}}exports.CannotInjectError=e;
},{}],"Q4n8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../container/Token"),n=require("../container/error/CannotInjectError");exports.getIdentifier=((r,t,o)=>{let i;if((i="string"==typeof r?r:r instanceof e.Token?r:r())===Object)throw new n.CannotInjectError(t,o);return i}),exports.isClient=(()=>"undefined"!=typeof window&&void 0!==window.document);
},{"../container/Token":"APeJ","../container/error/CannotInjectError":"Rch5"}],"TIhc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../../container/Container"),t=require("../../helpers/get-identifier");function n(n){return function(r,i,o){t.isClient()&&n&&"function"==typeof n?Object.defineProperty(r,i,{get:()=>e.Container.get(n)}):(n||(n=(()=>Reflect.getMetadata("design:type",r,i))),e.Container.registerHandler({object:r,propertyName:i,index:o,value:e=>e.get(t.getIdentifier(n,r,i))}))}}exports.Inject=n;
},{"../../container/Container":"SgUW","../../helpers/get-identifier":"Q4n8"}],"KGiC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../../helpers/reflect.decorator");function r(r){return e.ReflectDecorator(r,{type:"controller"})}exports.Controller=r;
},{"../../helpers/reflect.decorator":"+3J1"}],"VwLV":[function(require,module,exports) {
"use strict";function e(e){for(var r in e)exports.hasOwnProperty(r)||(exports[r]=e[r])}Object.defineProperty(exports,"__esModule",{value:!0}),e(require("./controller.decorator"));
},{"./controller.decorator":"KGiC"}],"EESq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../../helpers/reflect.decorator");function t(t){return e.ReflectDecorator(t,{type:"effect"})}exports.Effect=t;
},{"../../helpers/reflect.decorator":"+3J1"}],"KWtp":[function(require,module,exports) {
"use strict";function e(e){for(var r in e)exports.hasOwnProperty(r)||(exports[r]=e[r])}Object.defineProperty(exports,"__esModule",{value:!0}),e(require("./effect.decorator"));
},{"./effect.decorator":"EESq"}],"rn7g":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../../helpers/reflect.decorator");function r(r){return e.ReflectDecorator(r,{type:"plugin"})}exports.Plugin=r;
},{"../../helpers/reflect.decorator":"+3J1"}],"nPQ7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../../helpers/reflect.decorator");function t(t){return e.ReflectDecorator(t,{type:"component"})}exports.Component=t;
},{"../../helpers/reflect.decorator":"+3J1"}],"Up/z":[function(require,module,exports) {
"use strict";function e(e){for(var r in e)exports.hasOwnProperty(r)||(exports[r]=e[r])}Object.defineProperty(exports,"__esModule",{value:!0}),e(require("./component.decorator"));
},{"./component.decorator":"nPQ7"}],"QS96":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../../container/Container"),t=require("../../container/Token"),n=require("../../helpers/get-identifier");function r(r){return function(i,o,a){n.isClient()&&r instanceof t.Token?Object.defineProperty(i,o,{get:()=>e.Container.getMany(n.getIdentifier(r,i,o))}):(r||(r=(()=>Reflect.getMetadata("design:type",i,o))),e.Container.registerHandler({object:i,propertyName:o,index:a,value:e=>e.getMany(n.getIdentifier(r,i,o))}))}}exports.InjectMany=r;
},{"../../container/Container":"SgUW","../../container/Token":"APeJ","../../helpers/get-identifier":"Q4n8"}],"7Fb3":[function(require,module,exports) {
"use strict";function e(e){for(var r in e)exports.hasOwnProperty(r)||(exports[r]=e[r])}Object.defineProperty(exports,"__esModule",{value:!0}),e(require("./module/index")),e(require("./injector/index")),e(require("./inject-soft/index")),e(require("./inject/Inject")),e(require("./controller/index")),e(require("./effect/index")),e(require("./plugin/Plugin")),e(require("./service/Service")),e(require("./component/index")),e(require("./inject-many/InjectMany"));var r=require("./service/Service");exports.Injectable=r.Service;
},{"./module/index":"+y/V","./injector/index":"CaJ3","./inject-soft/index":"2Gz9","./inject/Inject":"TIhc","./controller/index":"VwLV","./effect/index":"KWtp","./plugin/Plugin":"rn7g","./service/Service":"77za","./component/index":"Up/z","./inject-many/InjectMany":"QS96"}],"7QCb":[function(require,module,exports) {
"use strict";function e(e){for(var r in e)exports.hasOwnProperty(r)||(exports[r]=e[r])}Object.defineProperty(exports,"__esModule",{value:!0}),require("reflect-metadata"),e(require("./container/index")),e(require("./decorators/index")),e(require("./helpers/index")),e(require("./services/index"));
},{"./container/index":"xCzv","./decorators/index":"7Fb3","./helpers/index":"iMXC","./services/index":"1ApS"}]},{},["7QCb"], null)
//# sourceMappingURL=/index.js.map